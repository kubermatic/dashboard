<div fxLayout="row"
       fxLayout.md="column"
       fxLayout.sm="column"
       fxLayout.xs="column"
       fxLayoutGap="20px">
  <mat-card class="set-cluster-spec" fxFlex>
    <mat-card-header>
      <mat-card-title>
        <h4>Name your Cluster</h4>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="clusterSpecForm" fxLayout="column">
        <mat-form-field fxFlex>
          <input id="name" matInput formControlName="name" type="text" placeholder="Enter a cluster name" title="name" autocomplete="off">
          <mat-hint>This is how you will identify your Kubernetes cluster instance. Choose a name that is easy for you to remember.</mat-hint>
          <mat-error *ngIf="clusterSpecForm.controls.name.hasError('required')">
            Name is <strong>required</strong>
          </mat-error>
        </mat-form-field>
        <div class="generate-name-btn" fxFlex>
          <button type="button" (click)="generateName()">Generate name</button>
        </div>
      </form>
    </mat-card-content>

    <mat-card-header class="km-machine-networks">
      <mat-card-title>
        <form [formGroup]="clusterSpecForm">
          <h4>
            <mat-checkbox fxFlex="50%" id="configure-machine-networks" formControlName="checkMachineNetworks">Configure Machine Networks</mat-checkbox>
          </h4>
        </form>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content *ngIf="!!clusterSpecForm.controls.checkMachineNetworks.value">
      <form [formGroup]="clusterSpecForm" fxLayout="column">
        <div fxFlex="100%" *ngFor="let network of getMachineNetworkForm(clusterSpecForm); let i=index" formArrayName="machineNetworks">
          <div [formGroupName]="i" fxLayout="column">
            <span class="km-single-machine-network">
              Machine Network #{{i+1}}
              <i class="fa fa-times" style="float: right" aria-hidden="true" (click)="deleteMachineNetwork(i)"></i>
            </span>
            <mat-form-field class="km-machine-networks-form-field">
              <input matInput formControlName="cidr" placeholder="CIDR Range" autocomplete="off">
              <mat-error *ngIf="clusterSpecForm.controls.name.hasError('required')">
                CIDR is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <mat-form-field class="km-machine-networks-form-field">
              <input matInput formControlName="dnsServers" placeholder="DNS Servers" autocomplete="off">
              <mat-error *ngIf="clusterSpecForm.controls.name.hasError('required')">
                DNS Server is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <mat-form-field class="km-machine-networks-form-field">
              <input matInput formControlName="gateway" placeholder="Gateway" autocomplete="off">
              <mat-error *ngIf="clusterSpecForm.controls.name.hasError('required')">
                Gateway is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <mat-divider></mat-divider>
          </div>
        </div>
        <span class="km-add-machine-network" (click)="addMachineNetwork()">
          <i class="fa fa-plus" aria-hidden="true"></i>
          Add new Machine Network
        </span>
      </form>
    </mat-card-content>
  </mat-card>

  <mat-card class="set-cluster-spec" fxFlex>
    <mat-card-header>
      <mat-card-title>
        <h4>Cluster Specifications</h4>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="clusterSpecForm">
        <mat-form-field>
          <mat-select placeholder="Master Version (optional):" formControlName="version">
              <mat-option *ngFor="let version of masterVersions" [value]="version.version">
                {{ version.version }}
              </mat-option>
          </mat-select>
          <mat-hint>Select the version that should be used for cluster creation. Unless otherwise specified, the default version {{defaultVersion}} will be used.</mat-hint>
        </mat-form-field>
      </form>
    </mat-card-content>
  </mat-card>
</div>
