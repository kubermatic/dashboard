<form [formGroup]="openstackSettingsForm" fxLayout="column">
  <mat-form-field fxFlex>
    <input matInput formControlName="domain" type="text" placeholder="Domain*:" title="Domain" autocomplete="off">
    <mat-error *ngIf="openstackSettingsForm.controls.domain.hasError('required')">
      Domain is <strong>required</strong>
    </mat-error>
  </mat-form-field>
  <mat-form-field fxFlex>
    <input matInput formControlName="username" type="text" placeholder="Username*:" title="Username" autocomplete="off">
    <mat-error *ngIf="openstackSettingsForm.controls.username.hasError('required')">
      Username is <strong>required</strong>
    </mat-error>
  </mat-form-field>
  <mat-form-field fxFlex>
    <input matInput formControlName="password" type="password" placeholder="Password*:" title="Password" autocomplete="off">
    <mat-error *ngIf="openstackSettingsForm.controls.password.hasError('required')">
      Password is <strong>required</strong>
    </mat-error>
  </mat-form-field>
  <mat-form-field fxFlex>
    <input matInput formControlName="tenant" placeholder="Tenant*:" [matAutocomplete]="auto">
    <mat-autocomplete #auto="matAutocomplete">
      <mat-option *ngIf="!loadingOptionalTenants && (openstackSettingsForm.controls.username.value === '' || openstackSettingsForm.controls.password.value === '' || openstackSettingsForm.controls.domain.value === '')" [value]="0">Please enter your credentials first!</mat-option>
      <mat-option *ngIf="loadingOptionalTenants" [value]="0">Loading tenants...</mat-option>

      <mat-option *ngFor="let item of tenants" [value]="item.name">
      {{item.name}}
      </mat-option>
    </mat-autocomplete>
    <mat-error *ngIf="openstackSettingsForm.controls.tenant.hasError('required')">
      Tenant is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <mat-form-field fxFlex *ngIf="!hideOptional">
    <mat-select placeholder="Floating IP pool:" formControlName="floatingIpPool">
      <mat-option *ngIf="!loadingOptionalSettings && (openstackSettingsForm.controls.username.value === '' || openstackSettingsForm.controls.password.value === '' || openstackSettingsForm.controls.domain.value === '')" [value]="">Please enter your credentials first!</mat-option>
      <mat-option *ngIf="loadingOptionalSettings" [value]="">Loading floating IP pools...</mat-option>

      <mat-option *ngIf="floatingIpPool.length">Select a floating IP pool </mat-option>
      <mat-option *ngFor="let item of floatingIpPool" [value]="item.name">
        {{item.name}}
      </mat-option>
    </mat-select>
    <mat-hint>When specified, all worker nodes will receive a public ip from this floating ip pool.</mat-hint>
  </mat-form-field>


  <mat-form-field fxFlex *ngIf="!hideOptional">
    <mat-select placeholder="Security group:" formControlName="securityGroups">
      <mat-option *ngIf="!loadingOptionalSettings && (openstackSettingsForm.controls.username.value === '' || openstackSettingsForm.controls.password.value === '' || openstackSettingsForm.controls.domain.value === '')" [value]="">Please enter your credentials first!</mat-option>
      <mat-option *ngIf="loadingOptionalSettings" [value]="">Loading security group...</mat-option>

      <mat-option *ngIf="securityGroup.length">Select a security group </mat-option>
      <mat-option *ngFor="let item of securityGroup" [value]="item.name">
        {{item.name}}
      </mat-option>
    </mat-select>
    <mat-hint>When specified, all worker nodes will be attached to this security group. If not specified, a security
      group will be created.
    </mat-hint>
  </mat-form-field>

  <div fxFlex class="mat-select-container" *ngIf="!hideOptional">
    <mat-form-field>
      <mat-select placeholder="Network:" formControlName="network">
        <mat-option *ngIf="!loadingOptionalSettings && (openstackSettingsForm.controls.username.value === '' || openstackSettingsForm.controls.password.value === '' || openstackSettingsForm.controls.domain.value === '')" [value]="">Please enter your credentials first!</mat-option>
        <mat-option *ngIf="loadingOptionalSettings" [value]="">Loading network...</mat-option>

        <mat-option *ngIf="network.length">Select a network </mat-option>
        <mat-option *ngFor="let item of network" [value]="item.name">
          {{item.name}}
        </mat-option>
      </mat-select>

      <mat-hint>When specified, all worker nodes will be attached to this network. If not specified, a network, subnet &
        router will be created.
      </mat-hint>
    </mat-form-field>
  </div>

  <div fxFlex class="mat-select-container" *ngIf="!hideOptional">
    <mat-form-field>
      <mat-select placeholder="Subnet ID:" formControlName="subnetId">
        <mat-option *ngIf="!loadingSubnetIds && (openstackSettingsForm.controls.username.value === '' || openstackSettingsForm.controls.password.value === '' || openstackSettingsForm.controls.domain.value === '')" [value]="">Please enter your credentials first!</mat-option>
        <mat-option *ngIf="loadingSubnetIds" [value]="">Loading subnet IDs...</mat-option>

        <mat-option *ngIf="!loadingSubnetIds && this.subnetIds.length === 0" [value]="">no subnet IDs available</mat-option>
        <mat-option *ngFor="let subnet of subnetIds" [value]="subnet.name">
          {{subnet.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</form>
