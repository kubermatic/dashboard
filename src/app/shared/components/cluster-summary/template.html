<!--
Copyright 2020 The Kubermatic Kubernetes Platform contributors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<div class="km-wizard-summary"
     [ngClass]="{'summary-with-number' : showNumbering}"
     fxFlex
     [fxLayout]="flipLayout ? 'column' : 'row wrap'"
     fxLayout.lt-md="column">
  <div [fxFlex]="flipLayout ? '100%' : '50%'"
       fxLayout="column"
       class="step">
    <div class="header counter-1">Provider</div>
    <div class="properties"
         [fxLayoutAlign]="flipLayout ? ' center' : ''"
         fxLayout="row wrap">
      <km-property>
        <div key>Provider</div>
        <div value><i class="km-provider-logo km-provider-logo-{{provider}}"></i></div>
      </km-property>
      <km-property>
        <div key>Datacenter</div>
        <div value><span *ngIf="datacenter?.spec">{{datacenter.spec.location}} ({{datacenter.spec.country}})</span>
        </div>
      </km-property>
    </div>
  </div>

  <div [fxFlex]="flipLayout ? '100%' : '50%'"></div>

  <div [fxFlex]="flipLayout ? '100%' : '50%'"
       fxLayout="column"
       [ngClass]="flipLayout ? '' : 'step'">
    <div class="header counter-2">Cluster</div>
    <div fxFlex
         class="info-container"
         [fxLayout]="flipLayout ? 'row wrap' : 'row wrap'">
      <div fxFlex="50%"
           class="container-spacing">
        <div class="section-header">General</div>
        <km-property>
          <div key>Name</div>
          <div value>
            <span *ngIf="cluster.name">{{cluster.name}}</span>
            <span *ngIf="!cluster.name">Autogenerated name</span>
          </div>
        </km-property>

        <km-property>
          <div key>Version</div>
          <div value>{{cluster.spec.version}}</div>
        </km-property>

        <km-property>
          <div key>Container Runtime</div>
          <div value>{{cluster.spec.containerRuntime}}</div>
        </km-property>

        <km-property>
          <div key>SSH Keys</div>
          <div value>
            <km-ssh-key-list [sshKeys]="getSSHKeys()"></km-ssh-key-list>
          </div>
        </km-property>

        <km-property *ngIf="displayTags(cluster.labels)">
          <div key>Cluster Labels</div>
          <div value>
            <km-labels [labels]="cluster.labels"></km-labels>
          </div>
        </km-property>
      </div>

      <div *ngIf="hasNetworkConfiguration"
           fxFlex="50%"
           class="container-spacing">
        <div class="section-header">Network Configuration</div>
        <km-property *ngIf="cluster.spec.cniPlugin?.type">
          <div key>CNI Plugin</div>
          <div value>{{cluster.spec.cniPlugin.type}}</div>
        </km-property>

        <km-property *ngIf="cluster.spec.cniPlugin?.version">
          <div key>CNI Plugin Version</div>
          <div value>{{cluster.spec.cniPlugin.version}}</div>
        </km-property>

        <ng-container *ngIf="cluster.spec.clusterNetwork">
          <km-property *ngIf="cluster.spec.clusterNetwork?.proxyMode">
            <div key>Proxy Mode</div>
            <div value>{{cluster.spec.clusterNetwork.proxyMode}}</div>
          </km-property>

          <h4 *ngIf="isDualStackNetworkSelected && isIPv4NetworkConfigured">IPv4</h4>

          <km-property *ngIf="cluster.spec.clusterNetwork?.pods?.cidrBlocks?.length">
            <div key>Pods CIDR</div>
            <div value>{{cluster.spec.clusterNetwork.pods.cidrBlocks[0]}}</div>
          </km-property>

          <km-property *ngIf="cluster.spec.clusterNetwork?.services?.cidrBlocks?.length">
            <div key>Services CIDR</div>
            <div value>{{cluster.spec.clusterNetwork.services.cidrBlocks[0]}}</div>
          </km-property>

          <km-property *ngIf="cluster.spec.clusterNetwork?.nodeCidrMaskSizeIPv4">
            <div key>Node CIDR Mask Size</div>
            <div value>{{cluster.spec.clusterNetwork.nodeCidrMaskSizeIPv4}}</div>
          </km-property>

          <km-property *ngIf="ipv4NodePortsAllowedIPRange as allowedIPRange">
            <div key>Allowed IP Range for NodePorts</div>
            <div value>{{allowedIPRange}}</div>
          </km-property>

          <ng-container *ngIf="isDualStackNetworkSelected && isIPv6NetworkConfigured">
            <h4>IPv6</h4>
            <km-property *ngIf="cluster.spec.clusterNetwork?.pods?.cidrBlocks?.length > 1">
              <div key>Pods CIDR</div>
              <div value>{{cluster.spec.clusterNetwork.pods.cidrBlocks[1]}}</div>
            </km-property>

            <km-property *ngIf="cluster.spec.clusterNetwork?.services?.cidrBlocks?.length > 1">
              <div key>Services CIDR</div>
              <div value>{{cluster.spec.clusterNetwork.services.cidrBlocks[1]}}</div>
            </km-property>

            <km-property *ngIf="cluster.spec.clusterNetwork?.nodeCidrMaskSizeIPv6">
              <div key>Node CIDR Mask Size</div>
              <div value>{{cluster.spec.clusterNetwork.nodeCidrMaskSizeIPv6}}</div>
            </km-property>

            <km-property *ngIf="ipv6NodePortsAllowedIPRange as allowedIPRange">
              <div key>Allowed IP Range for NodePorts</div>
              <div value>{{allowedIPRange}}</div>
            </km-property>
          </ng-container>

          <km-property-boolean *ngIf="cluster.spec.clusterNetwork?.nodeLocalDNSCacheEnabled"
                               label="Node Local DNS Cache"
                               [value]="cluster.spec.clusterNetwork?.nodeLocalDNSCacheEnabled">
          </km-property-boolean>

          <km-property-boolean *ngIf="cluster.spec.clusterNetwork?.konnectivityEnabled"
                               label="Konnectivity"
                               [value]="cluster.spec.clusterNetwork?.konnectivityEnabled">
          </km-property-boolean>
        </ng-container>
      </div>

      <div fxFlex="50%"
           class="container-spacing">
        <div class="section-header">Specification</div>
        <div *ngIf="cluster.spec.auditLogging?.enabled"
             fxLayout="row">
          <km-property-boolean label="Audit Logging"
                               [value]="cluster.spec.auditLogging?.enabled">
          </km-property-boolean>
          <span *ngIf="cluster.spec.auditLogging?.enabled"
                class="km-label-primary secondary">{{cluster.spec.auditLogging.policyPreset || 'custom'}}</span>
        </div>

        <km-property-boolean *ngIf="cluster.spec.enableUserSSHKeyAgent"
                             label="User SSH Key Agent"
                             [value]="cluster.spec.enableUserSSHKeyAgent">
        </km-property-boolean>

        <km-property-boolean *ngIf="cluster.spec.opaIntegration?.enabled"
                             label="OPA Integration"
                             [value]="cluster.spec.opaIntegration?.enabled">
        </km-property-boolean>

        <km-property-boolean *ngIf="isMLAEnabled && cluster.spec.mla?.loggingEnabled"
                             label="User Cluster Logging"
                             [value]="cluster.spec.mla?.loggingEnabled">
        </km-property-boolean>

        <km-property-boolean *ngIf="isMLAEnabled && cluster.spec.mla?.loggingEnabled"
                             label="User Cluster Monitoring"
                             [value]="cluster.spec.mla?.monitoringEnabled">
        </km-property-boolean>

        <km-property-boolean *ngIf="cluster.spec.kubernetesDashboard?.enabled"
                             label="Kubernetes Dashboard"
                             [value]="cluster.spec.kubernetesDashboard?.enabled">
        </km-property-boolean>

        <km-property-boolean *ngIf="cluster.spec.enableOperatingSystemManager"
                             label="Operating System Manager"
                             [value]="cluster.spec.enableOperatingSystemManager">
        </km-property-boolean>
      </div>

      <div *ngIf="hasAdmissionPlugins"
           fxFlex="50%"
           fxLayout="column"
           class="container-spacing">
        <div class="section-header">Admission Plugins</div>
        <km-property-boolean *ngFor="let plugin of admissionPlugins"
                             [label]="getAdmissionPluginName(plugin)"
                             [value]="isAdmissionPluginEnabled(plugin)">
        </km-property-boolean>

        <km-property *ngIf="cluster?.spec?.eventRateLimitConfig?.namespace">
          <div key>Event Rate Limit Config</div>
          <div value
               fxLayout="row wrap"
               fxLayoutGap="10px">
            <div><span class="km-text-muted">Limit Type:</span> Namespace</div>
            <div><span class="km-text-muted">QPS:</span> {{cluster.spec.eventRateLimitConfig.namespace.qps}}</div>
            <div><span class="km-text-muted">Burst:</span> {{cluster.spec.eventRateLimitConfig.namespace.burst}}
            </div>
            <div><span class="km-text-muted">Cache Size:</span> {{cluster.spec.eventRateLimitConfig.namespace.cacheSize}}
            </div>
          </div>
        </km-property>

        <km-property *ngIf="cluster?.spec?.podNodeSelectorAdmissionPluginConfig">
          <div key>Pod Node Selector Config</div>
          <div value>
            <km-labels [labels]="cluster?.spec?.podNodeSelectorAdmissionPluginConfig"
                       emptyMessage="No assigned labels"></km-labels>
          </div>
        </km-property>
      </div>
    </div>
  </div>

  <div [fxFlex]="flipLayout ? '100%' : '50%'"
       fxLayout="column"
       class="step">
    <ng-container *ngIf="!cluster.spec.cloud?.bringyourown">
      <div class="header counter-4">Initial Nodes</div>
      <div fxFlex
           class="info-container"
           [fxLayout]="flipLayout ? 'row wrap' : 'row wrap'">
        <div fxFlex="50%"
             class="container-spacing">
          <div class="section-header">General</div>
          <km-property *ngIf="machineDeployment.spec.replicas > 0">
            <div key>Name</div>
            <div value>
              <span *ngIf="machineDeployment.name">{{machineDeployment.name}}</span>
              <span *ngIf="!machineDeployment.name">Autogenerated name</span>
            </div>
          </km-property>

          <km-property>
            <div key>Replicas</div>
            <div value>{{machineDeployment.spec.replicas}}</div>
          </km-property>

          <km-property *ngIf="operatingSystem">
            <div key>Operating System</div>
            <div value
                 fxLayout="row"
                 fxLayoutAlign=" center"
                 fxLayoutGap="10px">
              <i class="km-os-image km-os-image-{{operatingSystemLogoClass}}"></i>
              <span>{{operatingSystem}}</span>
            </div>
          </km-property>

          <km-property *ngIf="operatingSystemProfile">
            <div key>Operating System Profile</div>
            <div value>{{operatingSystemProfile}}</div>
          </km-property>

          <km-property-boolean *ngIf="machineDeployment.spec.template.operatingSystem.ubuntu?.distUpgradeOnBoot"
                               label="Upgrade system on the first boot"
                               [value]="machineDeployment.spec.template.operatingSystem.ubuntu.distUpgradeOnBoot">
          </km-property-boolean>
          <km-property-boolean *ngIf="machineDeployment.spec.template.operatingSystem.centos?.distUpgradeOnBoot"
                               label="Upgrade system on the first boot"
                               [value]="machineDeployment.spec.template.operatingSystem.centos.distUpgradeOnBoot">
          </km-property-boolean>
          <km-property-boolean *ngIf="machineDeployment.spec.template.operatingSystem.sles?.distUpgradeOnBoot"
                               label="Upgrade system on the first boot"
                               [value]="machineDeployment.spec.template.operatingSystem.sles.distUpgradeOnBoot">
          </km-property-boolean>
          <km-property-boolean *ngIf="machineDeployment.spec.template.operatingSystem.amzn2?.distUpgradeOnBoot"
                               label="Upgrade system on the first boot"
                               [value]="machineDeployment.spec.template.operatingSystem.amzn2.distUpgradeOnBoot">
          </km-property-boolean>
          <km-property-boolean *ngIf="machineDeployment.spec.template.operatingSystem.rhel?.distUpgradeOnBoot"
                               label="Upgrade system on the first boot"
                               [value]="machineDeployment.spec.template.operatingSystem.rhel.distUpgradeOnBoot">
          </km-property-boolean>
          <km-property-boolean *ngIf="machineDeployment.spec.template.operatingSystem.rockyLinux?.distUpgradeOnBoot"
                               label="Upgrade system on the first boot"
                               [value]="machineDeployment.spec.template.operatingSystem.rockyLinux.distUpgradeOnBoot">
          </km-property-boolean>
          <km-property-boolean *ngIf="machineDeployment.spec.template.operatingSystem.flatcar?.disableAutoUpdate"
                               label="Disable system auto-update"
                               [value]="machineDeployment.spec.template.operatingSystem.flatcar.disableAutoUpdate">
          </km-property-boolean>
          <km-property-boolean *ngIf="machineDeployment.spec.dynamicConfig"
                               label="Dynamic kubelet Config"
                               [value]="machineDeployment.spec.dynamicConfig">
          </km-property-boolean>

          <km-property *ngIf="displayTags(machineDeployment.spec.template.labels)">
            <div key>Node Labels</div>
            <div value>
              <km-labels [labels]="machineDeployment.spec.template.labels"></km-labels>
            </div>
          </km-property>

          <km-property *ngIf="machineDeployment.spec.template.taints?.length > 0">
            <div key>Node Taints</div>
            <div value>
              <km-taints [taints]="machineDeployment.spec.template.taints"></km-taints>
            </div>
          </km-property>
        </div>

        <div fxFlex="50%"
             class="container-spacing">
          <div class="section-header">Provider</div>
          <!-- Do not display node info if replica count is set to 0 -->
          <ng-container *ngIf="machineDeployment.spec.replicas > 0">
            <!-- Alibaba Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.alibaba">
              <km-property>
                <div key>Instance Type</div>
                <div value>{{machineDeployment.spec.template.cloud?.alibaba.instanceType}}</div>
              </km-property>
              <km-property>
                <div key>Disk Size</div>
                <div value>{{machineDeployment.spec.template.cloud?.alibaba.diskSize}} GB</div>
              </km-property>
              <km-property>
                <div key>Disk Type</div>
                <div value>{{machineDeployment.spec.template.cloud?.alibaba.diskType}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.alibaba.vSwitchID">
                <div key>vSwitch ID</div>
                <div value>{{machineDeployment.spec.template.cloud?.alibaba.vSwitchID}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.alibaba.internetMaxBandwidthOut">
                <div key>Internet Max Bandwidth Out</div>
                <div value>{{machineDeployment.spec.template.cloud?.alibaba.internetMaxBandwidthOut}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.alibaba.zoneID">
                <div key>Zone ID</div>
                <div value>{{machineDeployment.spec.template.cloud?.alibaba.zoneID}}</div>
              </km-property>
            </ng-container>

            <!-- AWS Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.aws">
              <km-property>
                <div key>Instance Type</div>
                <div value>{{machineDeployment.spec.template.cloud?.aws?.instanceType}}</div>
              </km-property>
              <km-property>
                <div key>Disk Size</div>
                <div value>{{machineDeployment.spec.template.cloud?.aws?.diskSize}} GB</div>
              </km-property>
              <km-property>
                <div key>Volume Type</div>
                <div value>{{machineDeployment.spec.template.cloud?.aws?.volumeType}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.aws?.subnetID">
                <div key>Subnet ID</div>
                <div value>{{machineDeployment.spec.template.cloud?.aws?.subnetID}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.aws?.availabilityZone">
                <div key>Availability Zone</div>
                <div value>{{machineDeployment.spec.template.cloud?.aws?.availabilityZone}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.aws?.ami">
                <div key>AMI ID</div>
                <div value>{{machineDeployment.spec.template.cloud?.aws?.ami}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.aws?.spotInstanceMaxPrice > 0">
                <div key>Spot Instance Max Price</div>
                <div value>{{machineDeployment.spec.template.cloud.aws.spotInstanceMaxPrice | currency:'USD':'symbol':'1.0-4'}}</div>
              </km-property>
            </ng-container>

            <!-- Azure Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.azure">
              <km-property>
                <div key>Node Size</div>
                <div value>{{machineDeployment.spec.template.cloud?.azure.size}}</div>
              </km-property>
              <km-property *ngIf="!cluster.spec.cloud.azure.assignAvailabilitySet && machineDeployment.spec.template.cloud?.azure.zones">
                <div key>Zones</div>
                <div value>{{machineDeployment.spec.template.cloud?.azure.zones}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.azure.imageID">
                <div key>Image ID</div>
                <div value>{{machineDeployment.spec.template.cloud?.azure.imageID}}</div>
              </km-property>
              <km-property>
                <div key>Data Disk Size</div>
                <div *ngIf="machineDeployment.spec.template.cloud?.azure.dataDiskSize === 0"
                     value>
                  Default
                </div>
                <div value
                     *ngIf="machineDeployment.spec.template.cloud?.azure.dataDiskSize !== 0">
                  {{machineDeployment.spec.template.cloud?.azure.dataDiskSize}} GB
                </div>
              </km-property>
              <km-property>
                <div key>OS Disk Size</div>
                <div *ngIf="machineDeployment.spec.template.cloud?.azure.osDiskSize === 0"
                     value>
                  Default
                </div>
                <div *ngIf="machineDeployment.spec.template.cloud?.azure.osDiskSize !== 0"
                     value>{{machineDeployment.spec.template.cloud?.azure.osDiskSize}} GB
                </div>
              </km-property>
            </ng-container>

            <!-- DigitalOcean Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.digitalocean">
              <km-property>
                <div key>Node Size</div>
                <div value>{{machineDeployment.spec.template.cloud?.digitalocean?.size}}</div>
              </km-property>
            </ng-container>

            <!-- GCP Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.gcp">
              <km-property>
                <div key>Disk Size</div>
                <div value>{{machineDeployment.spec.template.cloud?.gcp?.diskSize}} GB</div>
              </km-property>
              <km-property>
                <div key>Disk Type</div>
                <div value>{{machineDeployment.spec.template.cloud?.gcp?.diskType}}</div>
              </km-property>
              <km-property>
                <div key>Machine Type</div>
                <div value>{{machineDeployment.spec.template.cloud?.gcp?.machineType}}</div>
              </km-property>
              <km-property>
                <div key>Zone</div>
                <div value>{{machineDeployment.spec.template.cloud?.gcp?.zone}}</div>
              </km-property>
            </ng-container>

            <!-- Hetzner Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.hetzner">
              <km-property>
                <div key>Node Type</div>
                <div value>{{machineDeployment.spec.template.cloud?.hetzner?.type}}</div>
              </km-property>
            </ng-container>

            <!-- KubeVirt Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.kubevirt">
              <km-property *ngIf="machineDeployment.spec.template.cloud?.kubevirt.cpus">
                <div key>CPUs</div>
                <div value>{{machineDeployment.spec.template.cloud?.kubevirt.cpus}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.kubevirt.memory">
                <div key>Memory</div>
                <div value>{{machineDeployment.spec.template.cloud?.kubevirt.memory}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.kubevirt.flavorName">
                <div key>VM Flavor</div>
                <div value>{{machineDeployment.spec.template.cloud?.kubevirt.flavorName}}</div>
              </km-property>
              <km-property>
                <div key>Operating System Image</div>
                <div value>{{machineDeployment.spec.template.cloud?.kubevirt.primaryDiskOSImage}}</div>
              </km-property>
              <km-property>
                <div key>Storage Class</div>
                <div value>{{machineDeployment.spec.template.cloud?.kubevirt.primaryDiskStorageClassName}}</div>
              </km-property>
              <km-property>
                <div key>Size</div>
                <div value>{{machineDeployment.spec.template.cloud?.kubevirt.primaryDiskSize}}</div>
              </km-property>
              <km-property *ngFor="let disk of machineDeployment.spec.template.cloud?.kubevirt?.secondaryDisks; let i = index;">
                <div key>Secondary Disk {{i + 1}}</div>
                <div value>{{disk.storageClassName}}, {{disk.size}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.kubevirt.podAffinityPreset">
                <div key>Pod Affinity Preset</div>
                <div value>{{machineDeployment.spec.template.cloud?.kubevirt.podAffinityPreset}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.kubevirt.podAntiAffinityPreset">
                <div key>Pod Anti-Affinity Preset</div>
                <div value>{{machineDeployment.spec.template.cloud?.kubevirt.podAntiAffinityPreset}}</div>
              </km-property>
              <ng-container *ngIf="machineDeployment.spec.template.cloud?.kubevirt.nodeAffinityPreset as nodeAffinityPreset">
                <km-property>
                  <div key>Node Affinity Preset</div>
                  <div value>{{nodeAffinityPreset.Type}}</div>
                </km-property>
                <km-property *ngIf="nodeAffinityPreset.Key">
                  <div key>Node Affinity Preset Key</div>
                  <div value>{{nodeAffinityPreset.Key}}</div>
                </km-property>
                <km-property *ngIf="nodeAffinityPreset.Values?.length">
                  <div key>Node Affinity Preset Values</div>
                  <div value>{{nodeAffinityPreset.Values.join(', ')}}</div>
                </km-property>
              </ng-container>
            </ng-container>

            <!-- Nutanix Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.nutanix">
              <km-property>
                <div key>Image Name</div>
                <div value>{{machineDeployment.spec.template.cloud.nutanix.imageName}}</div>
              </km-property>
              <km-property>
                <div key>Subnet Name</div>
                <div value>{{machineDeployment.spec.template.cloud.nutanix.subnetName}}</div>
              </km-property>
              <km-property>
                <div key>CPUs</div>
                <div value>{{machineDeployment.spec.template.cloud.nutanix.cpus}}</div>
              </km-property>
              <km-property>
                <div key>Cores per CPU</div>
                <div value>{{machineDeployment.spec.template.cloud.nutanix.cpuCores}}</div>
              </km-property>
              <km-property>
                <div key>Memory</div>
                <div value>{{machineDeployment.spec.template.cloud.nutanix.memoryMB}} MB</div>
              </km-property>
              <km-property>
                <div key>Disk Size</div>
                <div value>{{machineDeployment.spec.template.cloud.nutanix.diskSize}} GB</div>
              </km-property>
            </ng-container>
            <km-property-boolean *ngIf="machineDeployment.spec.template.cloud.nutanix?.cpuPassthrough"
                                 label="CPU Passthrough"
                                 [value]="machineDeployment.spec.template.cloud.nutanix.cpuPassthrough">
            </km-property-boolean>

            <!-- Openstack Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.openstack">
              <km-property>
                <div key>Flavor</div>
                <div value>{{machineDeployment.spec.template.cloud?.openstack.flavor}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.openstack?.diskSize">
                <div key>Custom Disk Size</div>
                <div value>{{machineDeployment.spec.template.cloud?.openstack.diskSize}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.openstack?.availabilityZone">
                <div key>Availability Zone</div>
                <div value>{{machineDeployment.spec.template.cloud?.openstack.availabilityZone}}</div>
              </km-property>
              <km-property>
                <div key>Image</div>
                <div value>{{machineDeployment.spec.template.cloud?.openstack.image}}</div>
              </km-property>
              <km-property>
                <div key>Instance Ready Check Period</div>
                <div value>{{machineDeployment.spec.template.cloud?.openstack.instanceReadyCheckPeriod}}</div>
              </km-property>
              <km-property>
                <div key>Instance Ready Check Timeout</div>
                <div value>{{machineDeployment.spec.template.cloud?.openstack.instanceReadyCheckTimeout}}</div>
              </km-property>
              <km-property-boolean *ngIf="machineDeployment.spec.template.operatingSystem.centos"
                                   label="Allocate Floating IP"
                                   [value]="machineDeployment.spec.template.cloud?.openstack?.useFloatingIP">
              </km-property-boolean>
            </ng-container>

            <!-- Equinix Nodes -->
            <ng-container *ngIf="machineDeployment.spec.template.cloud?.packet">
              <km-property>
                <div key>Instance Type</div>
                <div value>{{machineDeployment.spec.template.cloud?.packet?.instanceType}}</div>
              </km-property>
            </ng-container>

            <!-- VSphere Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.vsphere">
              <km-property>
                <div key>CPUs</div>
                <div value>{{machineDeployment.spec.template.cloud?.vsphere?.cpus}}</div>
              </km-property>
              <km-property>
                <div key>Memory</div>
                <div value>{{machineDeployment.spec.template.cloud?.vsphere?.memory}} MB</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.vsphere?.diskSizeGB">
                <div key>Disk Size</div>
                <div value>{{machineDeployment.spec.template.cloud?.vsphere?.diskSizeGB}} GB</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud?.vsphere?.template">
                <div key>Template</div>
                <div value>{{machineDeployment.spec.template.cloud?.vsphere?.template}}</div>
              </km-property>
            </ng-container>

            <!-- Anexia Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.anexia">
              <km-property>
                <div key>Number of CPUs</div>
                <div value>{{machineDeployment.spec.template.cloud?.anexia?.cpus}}</div>
              </km-property>
              <km-property>
                <div key>Memory in MB</div>
                <div value>{{machineDeployment.spec.template.cloud?.anexia?.memory}}</div>
              </km-property>
              <km-property>
                <div key>Disk Size in GB</div>
                <div value>{{machineDeployment.spec.template.cloud?.anexia?.diskSize}}</div>
              </km-property>
              <km-property>
                <div key>Template ID</div>
                <div value>{{machineDeployment.spec.template.cloud?.anexia?.templateID}}</div>
              </km-property>
              <km-property>
                <div key>VLAN ID</div>
                <div value>{{machineDeployment.spec.template.cloud?.anexia?.vlanID}}</div>
              </km-property>
            </ng-container>

            <!-- VMware Cloud Director Nodes -->
            <ng-container *ngIf="cluster.spec.cloud?.vmwareclouddirector">
              <km-property>
                <div key>CPUs</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.cpus}}</div>
              </km-property>
              <km-property>
                <div key>Cores per CPU</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.cpuCores}}</div>
              </km-property>
              <km-property>
                <div key>Memory</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.memoryMB}} MB</div>
              </km-property>
              <km-property>
                <div key>Disk Size</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.diskSizeGB}} GB</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud.vmwareclouddirector.diskIOPS">
                <div key>Disk IOPS</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.diskIOPS}}</div>
              </km-property>
              <km-property>
                <div key>Storage Profile</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.storageProfile}}</div>
              </km-property>
              <km-property>
                <div key>IP Allocation Mode</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.ipAllocationMode}}</div>
              </km-property>
              <km-property *ngIf="machineDeployment.spec.template.cloud.vmwareclouddirector.vapp">
                <div key>VApp</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.vapp}}</div>
              </km-property>
              <km-property>
                <div key>Catalog</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.catalog}}</div>
              </km-property>
              <km-property>
                <div key>Template</div>
                <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.template}}</div>
              </km-property>
            </ng-container>

            <!-- AWS Node Options -->
            <ng-container *ngIf="cluster.spec.cloud?.aws">
              <km-property-boolean *ngIf="machineDeployment.spec.template.cloud?.aws?.isSpotInstance !== undefined"
                                   label="Spot Instance"
                                   [value]="machineDeployment.spec.template.cloud?.aws?.isSpotInstance">
              </km-property-boolean>
              <km-property-boolean *ngIf="machineDeployment.spec.template.cloud?.aws?.spotInstancePersistentRequest !== undefined"
                                   label="Spot Instance Persistent Request"
                                   [value]="machineDeployment.spec.template.cloud.aws.spotInstancePersistentRequest">
              </km-property-boolean>
              <km-property-boolean *ngIf="machineDeployment.spec.template.cloud?.aws?.assignPublicIP !== undefined"
                                   label="Assign Public IP"
                                   [value]="machineDeployment.spec.template.cloud?.aws?.assignPublicIP">
              </km-property-boolean>
            </ng-container>

            <!-- Azure Node Options -->
            <ng-container *ngIf="cluster.spec.cloud?.azure">
              <km-property-boolean label="Assign Public IP"
                                   [value]="machineDeployment.spec.template.cloud?.azure?.assignPublicIP">
              </km-property-boolean>
            </ng-container>

            <!-- DigitalOcean Node Options -->
            <ng-container *ngIf="cluster.spec.cloud?.digitalocean">
              <km-property-boolean *ngIf="machineDeployment.spec.template.cloud?.digitalocean?.backups"
                                   label="etcd Backups"
                                   [value]="machineDeployment.spec.template.cloud?.digitalocean?.backups">
              </km-property-boolean>
              <km-property-boolean *ngIf="machineDeployment.spec.template.cloud?.digitalocean?.monitoring"
                                   label="Monitoring"
                                   [value]="machineDeployment.spec.template.cloud?.digitalocean?.monitoring">
              </km-property-boolean>
            </ng-container>

            <!-- GCP Node Options -->
            <ng-container *ngIf="cluster.spec.cloud?.gcp">
              <km-property-boolean label="Preemptible"
                                   [value]="machineDeployment.spec.template.cloud?.gcp?.preemptible">
              </km-property-boolean>
            </ng-container>

            <!-- Openstack Node Options -->
            <ng-container *ngIf="cluster.spec.cloud?.openstack">
              <km-property-boolean label="Allocate Floating IP"
                                   [value]="machineDeployment.spec.template.cloud?.openstack?.useFloatingIP">
              </km-property-boolean>
            </ng-container>

            <!-- AWS Tags -->
            <km-property *ngIf="displayTags(machineDeployment.spec.template.cloud?.aws?.tags)">
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.aws?.tags"></km-labels>
              </div>
            </km-property>

            <!-- Azure Tags -->
            <km-property *ngIf="displayTags(machineDeployment.spec.template.cloud?.azure?.tags)">
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.azure.tags"></km-labels>
              </div>
            </km-property>

            <!-- DigitalOcean Tags -->
            <km-property *ngIf="machineDeployment.spec.template.cloud?.digitalocean?.tags?.length > 0">
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.digitalocean?.tags"></km-labels>
              </div>
            </km-property>

            <!-- GCP Tags -->
            <km-property *ngIf="machineDeployment.spec.template.cloud?.gcp?.tags?.length > 0">
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.gcp.tags"></km-labels>
              </div>
            </km-property>

            <!-- Openstack Tags -->
            <km-property *ngIf="displayTags(machineDeployment.spec.template.cloud?.openstack?.tags)">
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.openstack.tags"></km-labels>
              </div>
            </km-property>

            <!-- Packet Tags -->
            <km-property *ngIf="machineDeployment.spec.template.cloud?.packet?.tags?.length > 0">
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.packet.tags"></km-labels>
              </div>
            </km-property>

            <!-- Alibaba Labels -->
            <km-property *ngIf="displayTags(machineDeployment.spec.template.cloud?.alibaba?.labels)">
              <div key>Provider Labels</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud.alibaba.labels"></km-labels>
              </div>
            </km-property>

            <!-- GCP Labels -->
            <km-property *ngIf="displayTags(machineDeployment.spec.template.cloud?.gcp?.labels)">
              <div key>Provider Labels</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud.gcp.labels"></km-labels>
              </div>
            </km-property>

            <!-- VSphere Tags -->
            <km-property *ngIf="machineDeployment.spec.template.cloud?.vsphere?.tags?.length>0">
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="convertVSphereTagsIntoObject(machineDeployment.spec.template.cloud?.vsphere?.tags)"></km-labels>
              </div>
            </km-property>

          </ng-container>
        </div>
      </div>
    </ng-container>
  </div>

  <div *ngIf="cluster.credential || displaySettings()"
       [fxFlex]="flipLayout ? '100%' : '50%'"
       fxLayout="column"
       class="step">
    <div class="header counter-3">Settings</div>
    <div class="properties"
         [fxLayoutAlign]="flipLayout ? ' center' : ''"
         [fxLayout]="flipLayout ? 'row wrap' : 'column'">
      <km-property *ngIf="cluster.credential">
        <div key>Preset</div>
        <div value>{{cluster.credential}}</div>
      </km-property>

      <ng-container *ngIf="!cluster.credential">
        <!-- AWS -->
        <ng-container *ngIf="cluster.spec.cloud?.aws">
          <km-property *ngIf="cluster.spec.cloud?.aws?.securityGroupID">
            <div key>Security Group ID</div>
            <div value>{{cluster.spec.cloud?.aws?.securityGroupID}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.aws?.vpcID">
            <div key>VPC ID</div>
            <div value>{{cluster.spec.cloud?.aws?.vpcID}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.aws?.routeTableID">
            <div key>Route Table ID</div>
            <div value>{{cluster.spec.cloud?.aws?.routeTableID}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.aws?.instanceProfileName">
            <div key>Instance Profile Name</div>
            <div value>{{cluster.spec.cloud?.aws?.instanceProfileName}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.aws?.roleARN">
            <div key>Control Plane Role (ARN)</div>
            <div value>{{cluster.spec.cloud?.aws?.roleARN}}</div>
          </km-property>
        </ng-container>

        <!-- Azure -->
        <ng-container *ngIf="cluster.spec.cloud?.azure">
          <km-property *ngIf="cluster.spec.cloud?.azure.loadBalancerSKU">
            <div key>LoadBalancer SKU</div>
            <div value>{{cluster.spec.cloud?.azure.loadBalancerSKU}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.azure.resourceGroup">
            <div key>Resource Group</div>
            <div value>{{cluster.spec.cloud?.azure.resourceGroup}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.azure.vnetResourceGroup">
            <div key>VNet Resource Group</div>
            <div value>{{cluster.spec.cloud?.azure.vnetResourceGroup}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.azure.routeTable">
            <div key>Route Table</div>
            <div value>{{cluster.spec.cloud?.azure.routeTable}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.azure.securityGroup">
            <div key>Security Group</div>
            <div value>{{cluster.spec.cloud?.azure.securityGroup}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.azure.subnet">
            <div key>Subnet</div>
            <div value>{{cluster.spec.cloud?.azure.subnet}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.azure.vnet">
            <div key>VNet</div>
            <div value>{{cluster.spec.cloud?.azure.vnet}}</div>
          </km-property>

          <km-property-boolean *ngIf="cluster.spec.cloud?.azure?.assignAvailabilitySet"
                               label="Assign Availability Set"
                               [value]="cluster.spec.cloud.azure.assignAvailabilitySet">
          </km-property-boolean>
        </ng-container>

        <!-- GCP -->
        <ng-container *ngIf="cluster.spec.cloud?.gcp">
          <km-property *ngIf="cluster.spec.cloud?.gcp?.network">
            <div key>Network</div>
            <div value>{{cluster.spec.cloud?.gcp?.network}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.gcp?.subnetwork">
            <div key>Subnetwork</div>
            <div value>{{cluster.spec.cloud?.gcp?.subnetwork}}</div>
          </km-property>
        </ng-container>

        <!-- Hetzner -->
        <ng-container *ngIf="cluster.spec.cloud?.hetzner">
          <km-property *ngIf="cluster.spec.cloud?.hetzner.network">
            <div key>Network</div>
            <div value>{{cluster.spec.cloud?.hetzner.network}}</div>
          </km-property>
        </ng-container>

        <!-- Openstack -->
        <ng-container *ngIf="cluster.spec.cloud?.openstack">
          <km-property>
            <div key>Domain</div>
            <div value>{{cluster.spec.cloud?.openstack.domain}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.username">
            <div key>Username</div>
            <div value>{{cluster.spec.cloud?.openstack.username}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.applicationCredentialID">
            <div key>Application Credential ID</div>
            <div value>{{cluster.spec.cloud.openstack.applicationCredentialID}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.project">
            <div key>Project</div>
            <div value>{{cluster.spec.cloud?.openstack.project}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.projectID">
            <div key>Project ID</div>
            <div value>{{cluster.spec.cloud?.openstack.projectID}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.network">
            <div key>Network Name</div>
            <div value>{{cluster.spec.cloud?.openstack.network}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.securityGroups">
            <div key>Security Groups</div>
            <div value>{{cluster.spec.cloud?.openstack.securityGroups}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.floatingIPPool">
            <div key>Floating IP Pool</div>
            <div value>{{cluster.spec.cloud?.openstack.floatingIPPool}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.subnetID">
            <div key>IPv4 Subnet ID</div>
            <div value>{{cluster.spec.cloud?.openstack.subnetID}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.ipv6SubnetID">
            <div key>IPv6 Subnet ID</div>
            <div value>{{cluster.spec.cloud?.openstack.ipv6SubnetID}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.openstack.ipv6SubnetPool">
            <div key>IPv6 Subnet Pool</div>
            <div value>{{cluster.spec.cloud?.openstack.ipv6SubnetPool}}</div>
          </km-property>
        </ng-container>

        <!-- Equinix -->
        <ng-container *ngIf="cluster.spec.cloud?.packet">
          <km-property>
            <div key>Project ID</div>
            <div value>{{cluster.spec.cloud?.packet.projectID}}</div>
          </km-property>
          <km-property>
            <div key>Billing Cycle</div>
            <div value>{{cluster.spec.cloud?.packet.billingCycle}}</div>
          </km-property>
        </ng-container>

        <!-- Nutanix -->
        <ng-container *ngIf="cluster.spec.cloud?.nutanix">
          <km-property>
            <div key>Username</div>
            <div value>{{cluster.spec.cloud.nutanix.username}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud.nutanix.proxyURL">
            <div key>Proxy URL</div>
            <div value>{{cluster.spec.cloud.nutanix.proxyURL}}</div>
          </km-property>
          <km-property>
            <div key>Cluster Name</div>
            <div value>{{cluster.spec.cloud.nutanix.clusterName}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud.nutanix.projectName">
            <div key>Project Name</div>
            <div value>{{cluster.spec.cloud.nutanix.projectName}}</div>
          </km-property>
          <ng-container *ngIf="cluster.spec.cloud?.nutanix?.csi">
            <km-property>
              <div key>Prism Element Username</div>
              <div value>{{cluster.spec.cloud.nutanix.csi.username}}</div>
            </km-property>
            <km-property>
              <div key>Prism Element Endpoint</div>
              <div value>{{cluster.spec.cloud.nutanix.csi.endpoint}}</div>
            </km-property>
            <km-property *ngIf="cluster.spec.cloud.nutanix.csi.port !== undefined">
              <div key>Prism Element Port</div>
              <div value>{{cluster.spec.cloud.nutanix.csi.port}}</div>
            </km-property>
            <km-property *ngIf="cluster.spec.cloud.nutanix.csi.storageContainer">
              <div key>Prism Element Storage Container</div>
              <div value>{{cluster.spec.cloud.nutanix.csi.storageContainer}}</div>
            </km-property>
            <km-property *ngIf="cluster.spec.cloud.nutanix.csi.fstype">
              <div key>Prism Element Storage Fstype</div>
              <div value>{{cluster.spec.cloud.nutanix.csi.fstype}}</div>
            </km-property>
          </ng-container>
        </ng-container>

        <!-- vSphere -->
        <ng-container *ngIf="cluster.spec.cloud?.vsphere">
          <km-property>
            <div key>Username</div>
            <div value>{{cluster.spec.cloud?.vsphere?.infraManagementUser?.username}}</div>
          </km-property>
          <km-property>
            <div key>VSphere Cloud Provider Username</div>
            <div value>{{cluster.spec.cloud?.vsphere.username}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.vsphere.vmNetName">
            <div key>Network</div>
            <div value>{{cluster.spec.cloud?.vsphere.vmNetName}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.vsphere.folder">
            <div key>Folder</div>
            <div value>{{cluster.spec.cloud?.vsphere.folder}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.vsphere.datastore">
            <div key>Datastore</div>
            <div value>{{cluster.spec.cloud?.vsphere.datastore}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.vsphere.datastoreCluster">
            <div key>Datastore Cluster</div>
            <div value>{{cluster.spec.cloud?.vsphere.datastoreCluster}}</div>
          </km-property>
          <km-property *ngIf="cluster.spec.cloud?.vsphere.resourcePool">
            <div key>Resource Pool</div>
            <div value>{{cluster.spec.cloud?.vsphere.resourcePool}}</div>
          </km-property>
        </ng-container>

        <!-- VMware Cloud Director -->
        <ng-container *ngIf="cluster.spec.cloud?.vmwareclouddirector as vmwareclouddirector">
          <km-property>
            <div key>Username</div>
            <div value>{{vmwareclouddirector.username}}</div>
          </km-property>
          <km-property>
            <div key>Organization</div>
            <div value>{{vmwareclouddirector.organization}}</div>
          </km-property>
          <km-property>
            <div key>VDC</div>
            <div value>{{vmwareclouddirector.vdc}}</div>
          </km-property>
          <km-property>
            <div key>Organziation VDC Network</div>
            <div value>{{vmwareclouddirector.ovdcNetwork}}</div>
          </km-property>
          <km-property *ngIf="vmwareclouddirector.vapp">
            <div key>VApp</div>
            <div value>{{vmwareclouddirector.vapp}}</div>
          </km-property>
          <ng-container *ngIf="vmwareclouddirector.csi">
            <km-property *ngIf="vmwareclouddirector.csi.storageProfile">
              <div key>Storage Profile</div>
              <div value>{{vmwareclouddirector.csi.storageProfile}}</div>
            </km-property>
            <km-property *ngIf="vmwareclouddirector.csi.filesystem">
              <div key>Filesystem</div>
              <div value>{{vmwareclouddirector.csi.filesystem}}</div>
            </km-property>
          </ng-container>
        </ng-container>

      </ng-container>

      <!-- KubeVirt -->
      <ng-container *ngIf="cluster.spec.cloud?.kubevirt?.preAllocatedDataVolumes as dataVolumes">
        <div fxLayout="row">
          <div fxFlex="90%">
            <km-kubevirt-pre-allocated-data-volumes [dataVolumes]="dataVolumes"></km-kubevirt-pre-allocated-data-volumes>
          </div>
        </div>
      </ng-container>
    </div>
  </div>

  <div [fxFlex]="flipLayout ? '100%' : '50%'"
       fxLayout="column"
       class="step">
    <div class="header counter-5">Applications</div>
    <div class="applications-summary"
         [fxLayoutAlign]="flipLayout ? ' center' : ''">
      <km-application-list *ngIf="applications?.length; else noApplications"
                           [applications]="applications"
                           [canEdit]="false"
                           [cluster]="cluster"
                           [view]="ApplicationsListView.Summary"></km-application-list>
      <ng-template #noApplications>
        No application selected.
      </ng-template>
    </div>
  </div>

</div>
