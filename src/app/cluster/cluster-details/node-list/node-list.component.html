<mat-card class="blue">
  <mat-card-header>
    <mat-card-title fxLayout>
      <div fxFlex="3%">
        #
      </div>
      <div fxFlex="36%">
        Name
      </div>
      <div fxFlex="15%">
        Kubelet Version
      </div>
      <div fxFlex="16%">
        IP addresses
      </div>
      <div fxFlex="16%">
        Created
      </div>
      <div fxFlex="5%" align="center">
        Status
      </div>
      <div fxFlex="10%"></div>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>

    <ng-container [ngSwitch]="!!nodes && nodes.length > 0 ">
      <ng-container *ngSwitchCase="true">
        <div class="row accordion" *ngFor="let node of nodes, let i = index" (click)="toggleNode(node.id)" [ngClass]="getNodeHealthStatus(node,i).class">
          <div fxLayout>
            <div fxFlex="3%">{{i + 1}}</div>

            <div fxFlex="36%" style="word-break: normal ;" *ngIf="!node.spec.cloud.aws">
              {{node.name}}
              <i class="fa fa-info-circle" matTooltip="{{getInfo(node)}}" *ngIf="showInfo(node)"></i>
            </div>
            <div fxFlex="36%" style="word-break: normal ;" *ngIf="node.spec.cloud.aws">
              {{getNodeName(node)}}
              <i class="fa fa-info-circle" matTooltip="{{getInfo(node)}}" *ngIf="showInfo(node)"></i>
            </div>
            <div fxFlex="15%">
              <span *ngIf="!!node.status.nodeInfo">{{node.status.nodeInfo.kubeletVersion}}</span>
            </div>
            <div fxFlex="16%">
              <div *ngIf="!!node.status.addresses && !!getAddresses(node).InternalIP">
                Int.IP:
                <span class="copy" [cbContent]="getAddresses(node).InternalIP" ngxClipboard  matTooltip="click to copy">{{getAddresses(node).InternalIP}}</span>
              </div>
              <div *ngIf="!!node.status.addresses && !!getAddresses(node).ExternalIP">
                Ext.IP:
                <span class="copy" [cbContent]="getAddresses(node).ExternalIP" ngxClipboard  matTooltip="click to copy">{{getAddresses(node).ExternalIP}}</span>
              </div>
            </div>
            <div fxFlex="16%">
              <span *ngIf="!!node.creationTimestamp">{{node.creationTimestamp | date:'yyyy-MM-dd, h:mm:ss a'}}</span>
            </div>
            <div fxFlex="5%" class="health-state">
              <i [matTooltip]="getNodeHealthStatus(node).status" [ngClass]="getNodeHealthStatus(node,i).color"></i>
            </div>

            <div fxFlex="10%" class="km-btn-remove-node-wrapper">
              <ng-container [ngSwitch]="!!node.deletionTimestamp">
                <ng-container *ngSwitchCase="true">
                  <mat-spinner [diameter]="30" class="km-spinner" color="accent"></mat-spinner>
                </ng-container>

                <ng-container *ngSwitchCase="false">
                  <button mat-icon-button class="km-duplicate-node" matTooltip="duplicate Node" (click)="duplicateNodeDialog(node)">
                    <i class="fa fa-clone" aria-hidden="true"></i>
                  </button>
                  <button mat-icon-button class="km-delete-node" matTooltip="delete Node" (click)="deleteNodeDialog(node)" [disabled]="!!userGroup && !userGroupConfig[userGroup].nodes.delete">
                    <i class="fa fa-trash-o" aria-hidden="true" [ngClass]="(!!userGroup && !userGroupConfig[userGroup].nodes.delete) ? 'disabled' : ''"></i>
                  </button>
                </ng-container>
              </ng-container>
            </div>
          </div>
          <div fxLayout *ngIf="node.status.errorMessage && node.status.errorMessage.length" class="km-conditionsMessage">
            <p color="accent">{{node.status.errorMessage}}</p>
          </div>

          <div class="node-details-wrapper" *ngIf="!!isShowNodeDetails[node.id]">
            <div class="node-details-content">
              <div fxLayout>
                <mat-card class="km-card-list" fxFlex="50%">
                  <mat-card-content class="km-card-list-content" fxLayout >
                    <div fxFlex="50%">
                      <strong>Operating System:</strong>
                    </div>
                    <div fxFlex="50%">
                      <img [src]="getOsImagePath(node)" class="os-image"/>
                    </div>
                  </mat-card-content>
                  <mat-card-content class="km-card-list-content" fxLayout *ngIf="!!node.spec.operatingSystem.ubuntu">
                    <div fxFlex="50%">
                      <strong>Upgrade system on first boot:</strong>
                    </div>
                    <div fxFlex="50%">
                      <i [ngClass]="node.spec.operatingSystem.ubuntu.distUpgradeOnBoot ? 'fa fa-check' : 'fa fa-times'"></i>
                    </div>
                  </mat-card-content>
                  <mat-card-content class="km-card-list-content" fxLayout *ngIf="!!node.spec.operatingSystem.centos">
                    <div fxFlex="50%">
                      <strong>Upgrade system on first boot:</strong>
                    </div>
                    <div fxFlex="50%">
                      <i [ngClass]="node.spec.operatingSystem.centos.distUpgradeOnBoot ? 'fa fa-check' : 'fa fa-times'"></i>
                    </div>
                  </mat-card-content>
                  <mat-card-content class="km-card-list-content" fxLayout *ngIf="!!node.spec.operatingSystem.containerLinux">
                    <div fxFlex="50%">
                      <strong>Disable auto-update:</strong>
                    </div>
                    <div fxFlex="50%">
                      <i [ngClass]="node.spec.operatingSystem.containerLinux.disableAutoUpdate ? 'fa fa-check' : 'fa fa-times'"></i>
                    </div>
                  </mat-card-content>
                  <mat-card-content class="km-card-list-content" fxLayout *ngIf="!!node.spec.cloud.aws">
                    <div fxFlex="50%">
                      <strong>Disk Type:</strong>
                    </div>
                    <div fxFlex="50%">
                      {{node.spec.cloud.aws.volumeType}}
                    </div>
                  </mat-card-content>
                  <mat-card-content class="km-card-list-content" fxLayout *ngIf="!!node.spec.cloud.digitalocean">
                    <div fxFlex="50%">
                      <strong>Backups:</strong>
                    </div>
                    <div fxFlex="50%">
                      <i [ngClass]="node.spec.cloud.digitalocean.backups ? 'fa fa-check' : 'fa fa-times'"></i>
                    </div>
                  </mat-card-content>
                </mat-card>

                <mat-card class="km-card-list" fxFlex="50%">
                  <mat-card-content class="km-card-list-content" fxLayout >
                    <div fxFlex="50%">
                      <strong>Capacity:</strong>
                    </div>
                    <div fxFlex="50%" *ngIf="!!node.status.capacity.cpu && !!node.status.capacity.memory">
                      {{node.status.capacity.cpu}} CPU, {{getFormattedNodeMemory(node.status.capacity.memory)}}
                    </div>
                  </mat-card-content>
                  <mat-card-content class="km-card-list-content" fxLayout *ngIf="!!node.spec.cloud.aws">
                    <div fxFlex="50%">
                      <strong>Disk Size:</strong>
                    </div>
                    <div fxFlex="50%">
                      {{node.spec.cloud.aws.diskSize}}
                    </div>
                  </mat-card-content>
                  <mat-card-content class="km-card-list-content" fxLayout *ngIf="!!node.spec.cloud.digitalocean">
                    <div fxFlex="50%">
                      <strong>IPv6:</strong>
                    </div>
                    <div fxFlex="50%">
                      <i [ngClass]="node.spec.cloud.digitalocean.ipv6 ? 'fa fa-check' : 'fa fa-times'"></i>
                    </div>
                  </mat-card-content>
                  <mat-card-content class="km-card-list-content" fxLayout *ngIf="!!node.spec.cloud.digitalocean">
                    <div fxFlex="50%">
                      <strong>Monitoring:</strong>
                    </div>
                    <div fxFlex="50%">
                      <i [ngClass]="node.spec.cloud.digitalocean.monitoring? 'fa fa-check' : 'fa fa-times'"></i>
                    </div>
                  </mat-card-content>
                </mat-card>
              </div>
            </div>
          </div>
        </div>
      </ng-container>

      <ng-container *ngSwitchCase="false">
        <div class="row no-item" *ngIf="clusterHealthStatus === 'statusRunning' || !isClusterRunning && cluster.spec.cloud.bringyourown ">No Node available. Please add a Node.</div>
        <div class="row" *ngIf="clusterHealthStatus !== 'statusRunning' || !isClusterRunning && !!!cluster.spec.cloud.bringyourown">
          <mat-spinner color="accent" class="node-list-spinner" [diameter]="30"></mat-spinner>
        </div>
      </ng-container>
    </ng-container>
  </mat-card-content>
</mat-card>

<mat-card [fxShow]="!!cluster.spec.cloud.bringyourown" class="km-mat-card-code-block">
  <mat-card-content>
    <div class="code-block">
      <p>
#Install kubeadm on you local system & the worker node: https://kubernetes.io/docs/setup/independent/install-kubeadm/<br>
<br>
# ====================================<br>
# ======= On your local system =======<br>
# ====================================<br>
#<br>
# => Create a new token for the new node<br>
kubeadm token --kubeconfig kubeconfig create --print-join-command<br>
<br>
# ====================================<br>
# ======== On the worker node ========<br>
# ====================================<br>
#<br>
#Use the command which got previously generated by kubeadm<br>
#example:<br>
#kubeadm join --token AAAAAA.BBBBBBBBBBBBB {{cluster.status.url}} --discovery-token-ca-cert-hash sha256:aaaabbbbcccc<br>
      </p>
    </div>
  </mat-card-content>
</mat-card>
