
<ng-container *ngIf="cluster">
  <div fxLayout fxLayoutGap="10px">
    <h2 fxFlex class="component-heading">{{cluster.spec.humanReadableName}}</h2>
  </div>

  <div fxLayout fxLayoutGap="10px">
    <div fxFlex>
      Kubernetes Master
      <button type="button" class="btn btn-primary" (click)="deleteCluster()">Delete Cluster</button>
    </div>
  </div>

  <div fxLayout="row" fxLayoutGap="10px">
    <div fxFlex="20%">Status</div>
    <div fxFlex="80%" class="health-state">
      <strong>{{cluster.status.phase}}</strong>
      - Health:
      <i class="fa fa-dot-circle-o" [class.green]="cluster.status.health.apiserver"></i>
      <i class="fa fa-dot-circle-o" [class.green]="cluster.status.health.controller"></i>
      <i class="fa fa-dot-circle-o" [class.green]="cluster.status.health.etcd"></i>
      <i class="fa fa-dot-circle-o" [class.green]="cluster.status.health.scheduler"></i>
    </div>
  </div>

  <div fxLayout fxLayoutGap="10px">
    <div fxFlex="20%">API Server</div>
    <div fxFlex="80%">
     {{cluster.address.url}}
      <a [attr.href]="downloadKubeconfigUrl()" target="_blank">download kubeconfig</a>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="cluster && cluster.dc">


    <div fxLayout fxLayoutGap="10px">
      <div fxFlex="40%">Provider</div>
      <div fxFlex="30%">Node Region</div>
      <div fxFlex="30%">shhKeys</div>
    </div>
    <div fxLayout fxLayoutGap="10px">
      <div fxFlex="40%">
        <img src="/assets/images/clouds/{{cluster.dc.spec.provider}}.png" class="icon-seed-cluster" alt="Cluster Icon" height="30" />
      </div>
      <div fxFlex="30%">
        {{cluster.spec.cloud.dc}}
      </div>
      <div fxFlex="30%">
        <ng-container [ngSwitch]="cluster.dc.spec.provider">
          <div *ngSwitchCase="'aws'">
            {{cluster.spec.cloud[cluster.dc.spec.provider].ssh_key_name}}
          </div>
          <div *ngSwitchCase="'digitalocean'">
            {{cluster.spec.cloud[cluster.dc.spec.provider].sshKeys.length}} sshKey(s)
          </div>
        </ng-container>
      </div>
    </div>


  <kubermatic-add-node [clusterName]="clusterModel.cluster" [seedDcName]="clusterModel.dc" [cluster]="cluster"></kubermatic-add-node>

  <div fxLayout fxLayoutGap="10px">
    <p fxFlex *ngIf="nodes" class="text-right">quantity of nodes: {{nodes.length}}</p>
  </div>



    <div fxLayout fxLayoutGap="10px">
      <div fxFlex="25%">Name</div>
      <div fxFlex="10%">Capacity</div>
      <div fxFlex="25%">Version</div>
      <div fxFlex="15%">Public IP</div>
      <div fxFlex="10%">Status</div>
      <div fxFlex="15%"></div>
    </div>

    <ng-container [ngSwitch]="!!nodes && nodes.length > 0 ">
      <div *ngSwitchCase="true">

        <kubermatic-node *ngFor="let n of nodes" [node]="n" [clusterName]="clusterModel.cluster" [seedDcName]="clusterModel.dc" [nodeProvider]="cluster.dc.spec.provider"></kubermatic-node>
      </div>


      <div *ngSwitchCase="false" fxLayout fxLayoutGap="10px">
        <div fxFlex>
          No Node available. Please add a Node.
        </div>
      </div>
    </ng-container>


</ng-container>


<ng-container *ngIf="cluster && !cluster.dc">
  <div fxLayout="column" fxLayoutGap="10px">
      <p fxFlex>
        No Provider available. Please add a Provider.
      </p>
  </div>
</ng-container>
