<ng-container *ngIf="isLoaded()">
  <div fxLayout>
    <h2 fxFlex="50%">{{cluster.spec.humanReadableName}}</h2>
    <div fxFlex="50%" align="right" style="margin-top: 25px;">
      <button class="add-node-btn" md-raised-button color="primary" (click)="addNode()" [disabled]="cluster.status.phase != 'Running'">
          <i class="fa fa-plus" style="margin-right: 5px;" aria-hidden="true"></i>
          Add Node
      </button>
      <button md-raised-button color="primary" (click)="upgradeClusterDialog()"
      [disabled]="cluster.status.phase != 'Running' || upgradesList.length === 0">
        <i class="fa fa-arrow-up" style="margin-right: 5px;" aria-hidden="true"></i>
        Upgrade Cluster
      </button>
      <button md-button (click)="deleteClusterDialog()" md-raised-button >
        <i class="fa fa-trash-o" aria-hidden="true" style="margin-right: 5px;margin-top: -4px; color: #0288d1;" color="primary"></i>
        Delete Cluster
      </button>
    </div>
  </div>

  <md-card class="km-card-list">
    <md-card-header class="km-card-list-header">
      <md-card-title>Kubernetes Master</md-card-title>
    </md-card-header>
    <md-card-content class="km-card-list-content" fxLayout >
      <div fxFlex="20%">Status:</div>
      <div fxFlex="80%">
        <strong>{{cluster.status.phase}}</strong>
        <span>- Health:</span>
        <kubermatic-cluster-health-status [health]="cluster.status.health"></kubermatic-cluster-health-status>
      </div>
    </md-card-content>
    <md-card-content class="km-card-list-content seed" fxLayout>
      <div fxFlex="20%">Master Region:</div>
      <div fxFlex="80%"><span class="{{'flag-icon flag-icon-' + seedDc.spec.country.toLowerCase()}}"></span> <span class="location">{{seedDc.spec.country}} / {{seedDc.spec.location}}</span></div>
    </md-card-content>
    <md-card-content class="km-card-list-content" fxLayout>
      <div fxFlex="20%">Master Version:</div>
      <div fxFlex="80%">
        {{cluster.spec.masterVersion}}
        <small (click)="upgradeClusterDialog()" [hidden]="cluster.status.phase != 'Running' || upgradesList.length === 0">upgrade available</small>
      </div>
    </md-card-content>
    <md-card-content class="km-card-list-content" fxLayout>
      <div fxFlex="20%">API Server:</div>
      <div fxFlex="80%">
        <a [attr.href]="downloadKubeconfigUrl()" *ngIf="cluster.isRunning()" md-button color="primary" class="km-download-config" target="_blank"><i class="fa fa-save"></i> download kubeconfig</a>
        <md-spinner *ngIf="!cluster.isRunning()" class="km-spinner-sm"></md-spinner>
      </div>
    </md-card-content>

  </md-card>

  <md-card class="km-card-list">
    <md-card-header class="km-card-list-header" >
      <md-card-title fxLayout>
        <div fxFlex="25%">Provider</div>
        <div fxFlex="35%">Node Region</div>
        <div fxFlex="40%">SSH keys</div>
      </md-card-title>
    </md-card-header>
    <md-card-content class="km-card-list-content" fxLayout>
      <div fxFlex="25%">
        <img src="/assets/images/clouds/{{nodeDc.spec.provider}}.png" class="icon-seed-cluster" alt="Cluster Icon" height="30" />
      </div>
      <div fxFlex="35%" class="km-provider-region">
        <span class="{{'flag-icon flag-icon-' + nodeDc.spec.country.toLowerCase()}}"></span>
        <span class="location">{{nodeDc.spec.country}} / {{nodeDc.spec.location}}</span>
      </div>
      <div fxFlex="40%">
        <ng-container [ngSwitch]="sshKeys.length > 0">
          <ul class="km-ssh-keys-list"  *ngSwitchCase="true">
            <li *ngFor="let key of sshKeys">
              <i class="fa fa-key"></i>
              {{key.spec.name}}
            </li>
          </ul>
          <ng-container *ngSwitchCase="false">no SSH Key selected</ng-container>
        </ng-container>
      </div>
    </md-card-content>
  </md-card>


    <ng-container [ngSwitch]="!!nodes && nodes.length > 0 ">
      <ng-container *ngSwitchCase="true">

        <kubermatic-node [nodes]="nodes" [clusterName]="cluster.metadata.name" [seedDcName]="cluster.seed" [nodeProvider]="seedDc.spec.provider"></kubermatic-node>


        <kubermatic-node-group [nodes]="groupedNodes" [clusterName]="cluster.metadata.name" [seedDcName]="cluster.seed" [nodeProvider]="seedDc.spec.provider"></kubermatic-node-group>

      </ng-container>

      <ng-container *ngSwitchCase="false" align="center">
        <span *ngIf="cluster.isRunning()">No Node available. Please add a Node.</span>
        <md-spinner *ngIf="!cluster.isRunning() && !nodes" color="accent" class="node-list-spinner"></md-spinner>
      </ng-container>
    </ng-container>
</ng-container>


<div *ngIf="!isLoaded()">
  <md-spinner color="accent" class="km-spinner"></md-spinner>
</div>
