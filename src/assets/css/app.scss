@import "colors";
@import "fonts";
@import "variables";

html,
body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  position: absolute;
  font-family: $primary-font;
  background-color: $grey-background;
  color: $text-color;
}

// spinner
.km-spinner {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: auto;
}

// global
.km-table {
  width: 100%;
  border-radius: $border-radius;
  border-collapse: separate;
  border-spacing: 0;

  tr:first-child th:first-child {
    border-top-left-radius: $border-radius;
  }

  tr:first-child th:last-child {
    border-top-right-radius: $border-radius;
  }

  td:first-child:not(.km-serviceaccount-token):not(.km-key-publickey) {
    padding-left: 3.75 * $baseline-grid;
  }

  td:last-child:not(.km-serviceaccount-token):not(.km-key-publickey) {
    padding-right: 3.75 * $baseline-grid !important;
  }

  .km-header-row {
    background-color: $white-text-color;
    border-radius: $border-radius;
    border-collapse: separate;
    line-height: 4 * $line-height;
  }

  .km-header-cell,
  .mat-sort-header-button {
    color: $text-color;
    font-size: $body-font-size-base;
    font-weight: normal;
    border-bottom: none;
    padding: 0;
  }

  .km-header-cell:last-of-type {
    padding-right: 3.75 * $baseline-grid;
  }

  .km-header-cell:first-of-type {
    padding-left: 3.75 * $baseline-grid;
  }

  .mat-header-row {
    height: auto;
    line-height: 4 * $line-height;
  }

  .km-mat-row.km-clickable:hover {
    background-color: $hover;
  }

  td.mat-cell {
    border-top: 1px solid $separator;
    border-bottom-width: 0;
    line-height: 5 * $line-height;
    padding-right: 2 * $baseline-grid;
    font-size: $subhead-font-size-base;

    &:last-of-type {
      padding-right: 2 * $baseline-grid;
    }

    &:first-of-type {
      padding-left: 2 * $baseline-grid;
    }

    &.mat-column-provider {
      padding-top: .5 * $baseline-grid;
      padding-bottom: .5 * $baseline-grid;
    }
  }

  // transition for buttons in tables
  .km-table-actions button {
    opacity: 0;
    margin-left: 0.625 * $baseline-grid;
    transition: visibility 0s 0s, opacity 0s ease-out;
  }

  tr:hover button {
    opacity: 1;
    transition: opacity 0.1s ease-out;
  }
}

.km-table-dropdown {
  margin: 0;
  padding: 0 !important;
  background-color: $light-background;

  .km-header-row,
  .km-mat-row {
    background-color: $light-background;
  }

  tr:first-child td:first-child {
    border-top-left-radius: $border-radius;
  }

  tr:first-child td:last-child {
    border-top-right-radius: $border-radius;
  }

  td.mat-cell {
    border-top: 1px solid $dropdown-border;
  }

  td:first-child {
    border-left: 1px solid $dropdown-border;
  }

  td:last-child {
    border-right: 1px solid $dropdown-border;
  }
}

.km-paginator {
  border-radius: 0 0 $border-radius $border-radius;
  border-top: 1px solid $separator;
}

.mat-button-toggle-group-appearance-standard {
  border: none;
}

.mat-button-toggle-group-appearance-standard .mat-button-toggle + .mat-button-toggle {
  border-left: solid 1px rgba(0, 0, 0, 0.12);

  &:hover {
    border-left: solid 1px $primary;
  }
}

.km-mat-footer-row {
  padding: 0;
  border-style: solid dashed dashed dashed;
  border-width: 1px;
  border-color: $dropdown-border;
  border-bottom-right-radius: $border-radius;
  border-bottom-left-radius: $border-radius;

  &:hover {
    background-color: $hover;
  }

  button {
    background-color: transparent;
    width: 100%;
    line-height: 5 * $baseline-grid;
    color: $medium-text-color;
    font-weight: normal;
    font-size: $subhead-font-size-base;
  }
}

.mat-card-content {
  p {
    color: $light-button-color;
    font-size: $caption-font-size-base;
    margin: 0 0 (1.875 * $baseline-grid);
  }

  button {
    border: none;
    color: $primary;
    outline: none;
    cursor: pointer;
    font-size: $body-font-size-base;
    font-weight: 600;
    padding: 0;
  }
}

// Notifications
simple-notifications * {
  cursor: auto;
  z-index: 2000;
}

// Sidenav
.mat-nav-list {
  .mat-list-item-content {
    padding: 0 !important;
  }
}

// Projects
.km-project-toggle {
  .mat-tab-header {
    border-bottom: none;
  }

  .mat-ink-bar {
    visibility: hidden !important;
    height: 0;
  }

  .mat-tab-label {
    background-color: $secondary !important;
    opacity: 1;
    margin-right: 0.375 * $baseline-grid;
    padding: 0;

    &.mat-tab-disabled {
      background-color: $disabled-button-color !important;
    }

    &.mat-tab-label-active {
      opacity: 1;

      .mat-tab-label-content {
        width: 100%;
        height: 100%;
        background-color: $primary;
        color: $white-text-color;
      }
    }

    .mat-tab-label-content {
      text-transform: uppercase;
      font-size: $subhead-font-size-base;
    }
  }
}

// Step Provider and Datacenter

mat-button-toggle-group {
  background-color: transparent;
  box-shadow: none !important;

  mat-button-toggle {
    margin-right: 1.25 * $baseline-grid;
    display: flex;
    align-items: center;
    background-color: $white-text-color;
    border: 1px solid $border;
    cursor: pointer;
    max-width: 150px;
    min-width: 150px;
    min-height: 60px;
    max-height: 60px;

    &:hover {
      border: 1px solid $primary;
    }
  }

  .mat-button-toggle-checked {
    background-color: $white-text-color;
    border: 1px solid $primary;
  }

  .mat-button-toggle-label {
    width: 100%;
    height: 100%;
  }

  .mat-button-toggle-label-content {
    display: flex;
    align-items: center;
    justify-content: center;

    .km-provider-logo {
      min-height: 28px;
      max-height: 28px !important;
      max-width: 90px !important;
    }
  }
}

mat-button-toggle-group[group='datacenterGroup'],
mat-button-toggle-group[group='providerGroup'] {
  border-radius: 0;

  .mat-button-toggle {
    border-radius: $border-radius;
  }

  .mat-button-toggle-button {
    height: 100%;
    text-align: left;
    padding: 0 (1.25 * $baseline-grid);
  }

  .mat-button-toggle-checked {
    border-left: 1px solid $primary !important;
  }
}

mat-button-toggle-group[group='datacenterGroup'] .mat-button-toggle-label-content {
  padding: 0 (0.625 * $baseline-grid);
  width: 100%;
  display: inline-block;
}

mat-button-toggle-group[group='providerGroup'] .mat-button-toggle-label-content {
  height: 100%;
  padding: 0 (1.25 * $baseline-grid);
}

mat-card-header > div > mat-card-title > div {
  margin: $baseline-grid 0;
  font-size: $body-font-size-base;
}

.mat-card.km-with-table-header {
  padding: (3.75 * $baseline-grid) 0;
  margin: (2.5 * $baseline-grid) 0 0 0;
  box-shadow: $border-box-shadow !important;
  border-radius: $border-radius !important;

  .mat-card-header {
    padding: 0 7 * $baseline-grid;
    margin: 0;
    line-height: 1.6 * $line-height;
    background-color: $white-text-color;
    color: $text-color;
    border-radius: $border-radius $border-radius 0 0;
  }

  &.km-small .mat-card-header {
    font-size: $small-font-size-base !important;
    line-height: 1.6 * $line-height;
  }

  .mat-card-content {
    line-height: 5 * $line-height;

    &.km-row,
    .km-row {
      line-height: 5 * $line-height;
      padding: 0 (3.75 * $baseline-grid);
      border-top: 1px solid $separator;

      &.km-small {
        padding: (1.25 * $baseline-grid) (3 * $baseline-grid);
        margin: 0;
        line-height: 2 * $line-height;
      }

      &.km-accordion {
        padding-bottom: 0;

        > div:first-child {
          padding-bottom: 10px;
        }
      }

      div {
        outline: none;
      }

      &.km-odd {
        background-color: $medium-background;
      }

      &.km-status-running:hover {
        background-color: $light-background;
      }

      &.km-status-waiting {
        background-color: $pending;

        &:hover {
          background-color: $pending-hover;
        }
      }

      &.km-status-failed,
      &.km-status-deleting {
        background-color: $deleting;

        &:hover {
          background-color: $deleting-hover;
        }
      }

      &.km-no-item,
      .km-no-item {
        text-align: center;
        font-size: $body-font-size-base;
        color: $text-color;
      }

      p {
        line-height: normal;
        color: $text-color;
        margin: 0;
        font-size: $body-font-size-base;
      }

      .km-region {
        align-items: center;

        .flag-icon {
          font-size: $head-font-size-base;
          margin-right: 1.25 * $baseline-grid;
        }
      }
    }
  }
}

.km-provider-logo {
  display: block;
  height: 100% !important;
  width: 100% !important;
  max-height: 30px !important;
  max-width: 70px !important;
}

.mat-card.white {
  padding: (3.75 * $baseline-grid) 0;
  margin: 0;
  box-shadow: $border-box-shadow !important;
  border-radius: $border-radius !important;

  &.km-cluster-details {
    padding: (3.75 * $baseline-grid) 0 0 0;
  }

  &.km-status-waiting {
    background-color: $pending;
  }

  &.km-status-failed,
  &.km-status-deleting {
    background-color: $deleting;
  }

  .mat-card-header {
    margin: 0;

    .mat-card-header-text {
      width: 100%;

      .mat-card-title {
        padding: 0;
        margin: 0;
        align-items: baseline;
      }
    }
  }

  .mat-card-content {
    line-height: 5 * $line-height;

    &.km-row,
    .km-row {
      line-height: 5 * $line-height;
      padding: 0;
    }
  }
}

// Scrollbar
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-button {
  width: 0;
  height: 0;
}

::-webkit-scrollbar-thumb {
  background: $light-text-color;
  border: 0 none $white-text-color;
  border-radius: 10 * $border-radius;
}

::-webkit-scrollbar-thumb:hover {
  background: $light-text-color;
}

::-webkit-scrollbar-thumb:active {
  background: $light-text-color;
}

::-webkit-scrollbar-track {
  background: $medium-background;
  border: 0 none $white-text-color;
  border-radius: 10 * $border-radius;
}

::-webkit-scrollbar-track:hover {
  background: $medium-background;
}

::-webkit-scrollbar-track:active {
  background: $medium-background;
}

::-webkit-scrollbar-corner {
  background: transparent;
}

// copy text
.km-copy {
  cursor: pointer;

  &:hover {
    color: $primary;
  }

  &:active {
    color: $light-primary;
  }
}

// List Header sorting arrow
.mat-sort-header-arrow {
  margin: auto 0 auto (0.75 * $baseline-grid) !important;
  color: $text-color !important;

  .mat-sort-header-stem,
  .mat-sort-header-pointer-left,
  .mat-sort-header-pointer-right,
  .mat-sort-header-pointer-middle {
    background: none;
  }
}

[aria-sort='ascending'] .mat-sort-header-arrow .mat-sort-header-indicator {
  &::before {
    content: url("/assets/images/icons/arrow-up.svg");
    position: absolute;
    transform: translateY(3px);
  }

  &.ng-animating {
    visibility: hidden;
  }
}

[aria-sort='descending'] .mat-sort-header-arrow .mat-sort-header-indicator {
  &::before {
    content: url("/assets/images/icons/arrow-up.svg");
    transform: rotate(180deg) translateY(3px);
    position: absolute;
  }

  &.ng-animating {
    visibility: hidden;
  }
}

// mat card remove border
.mat-card {
  box-shadow: none !important;
}

// tooltip
.mat-tooltip {
  background-color: $light-primary !important;
  margin-top: 0.625 * $baseline-grid !important;
}

// button shadow

.mat-raised-button {
  height: 30px;
  line-height: 1.6 * $line-height !important;
  margin-left: 0.625 * $baseline-grid !important;
  font-weight: 500 !important;
}

// loading indicater
#km-top-progress-bar {
  visibility: hidden;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 1;
  width: 100%;
  z-index: 5000;
}

.km-progress-bar-container {
  background-color: $border;
}

// overlay background
.mat-button-focus-overlay {
  background-color: transparent !important;
}

// cluster details: edit provider settings
.km-provider-edit-settings,
.km-machine-networks-settings {
  .mat-menu-content {
    padding: 0 !important;
  }
}

mat-list-item.disabled {
  i {
    opacity: 0.3;
  }
}

.km-btn-in-box:disabled {
  color: $disabled-button-color;
}

.km-action-button-icon {
  margin-right: 0.625 * $baseline-grid;
}

.km-warning {
  color: $indicator-red !important;
}

.km-text {
  color: $text-color;
}

.km-muted {
  color: $light-text-color;
}

.km-link:hover {
  cursor: pointer;
  color: $primary;
}

.km-clickable {
  cursor: pointer;
  outline: none;
}

// Tags
.km-tags-in-wizard {
  margin-top: 5px;
}

// Card headers.
.mat-card-header .mat-card-title {
  color: $text-color !important;
  padding: $baseline-grid 0 (2 * $baseline-grid);
  font-size: 20px;
  font-weight: normal !important;

  i {
    font-size: $subhead-font-size-base-lg;
    margin: 0 (2.5 * $baseline-grid);
  }
}

.mat-card-header-text {
  margin: 0 !important;
}

// Card contents.
.km-content-wrap {
  display: flex;
  flex-flow: row wrap;
  padding: $baseline-grid (7 * $baseline-grid) 0 !important;
}

// Card "expansion panel".
.km-card-expansion-panel {
  color: $text-color;
  font-size: $subhead-font-size-base;
  margin: 0 (7 * $baseline-grid);
  padding: (1 * $baseline-grid) 0;

  & > div {
    cursor: default;
    margin-right: 6 * $baseline-grid;

    & > span {
      margin-right: 2 * $baseline-grid;
      margin-top: $baseline-grid / 4;
    }
  }

  .km-icon-failed,
  .km-icon-disabled,
  .km-icon-running,
  .fa {
    width: $subhead-font-size-base;
    height: $subhead-font-size-base;
    font-size: $subhead-font-size-base;
  }
}

// Health statuses.
.green {
  color: $indicator-green;
}

.orange {
  color: $indicator-orange;
}

.red {
  color: $indicator-red;
}

// Row width.
.mat-column-status,
.mat-column-stateArrow {
  width: $baseline-grid;
}

// Remove background overlay added by the menu.
.mat-drawer-container {
  background-color: transparent;
}

// Buttons.
.mat-button,
.mat-flat-button,
.mat-raised-button {
  font-size: $subhead-font-size-base;
  line-height: 5 * $baseline-grid !important;
  background-color: $primary;
  color: $white-text-color;

  &:not(:first-child) {
    margin-left: 1.25 * $baseline-grid !important;
  }

  &:hover:not([disabled]) {
    background-color: $primary-hover;
  }

  &.mat-alternative:not([disabled]) {
    background-color: $quaternary;

    &:hover {
      background-color: $quaternary-hover;
    }
  }

  &.mat-tertiary:not([disabled]) {
    background-color: transparent;
    color: $medium-text-color;
    border: 1px solid $footer-text-color;

    &:hover {
      background-color: $tertiary-hover;
    }
  }

  &.mat-pure:not([disabled]) {
    background-color: transparent;
    color: $medium-text-color;
    border: none;

    &:hover {
      background-color: $tertiary-hover;
    }
  }

  &.km-small-button {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 5 * $baseline-grid;
    min-width: unset;
  }
}

.mat-icon-button {
  i {
    background-color: $text-color;
  }

  a {
    display: flex;
    justify-content: center;
  }

  &:hover:not([disabled]) {
    background-color: $separator;
  }

  &:disabled i {
    background-color: $disabled-button-color;
  }

  &:disabled a {
    cursor: default;
    text-decoration: none;
    pointer-events: none;
  }
}

.mat-icon-button[disabled] * {
  cursor: auto;
}

// Inputs.
mat-form-field.mat-form-field {
  color: $text-color;
  width: 100%;

  &.km-with-hint {
    margin-bottom: 1.875 * $baseline-grid;
  }
}

span.mat-select-value-text {
  color: $text-color;
}

div.mat-form-field-outline.mat-form-field-outline-thick {
  color: $quaternary;
}

mat-form-field.mat-form-field-should-float:not(.mat-focused):not(.ng-invalid):not(.mat-form-field-disabled) div.mat-form-field-flex:hover label {
  transition: all .2s ease;
  color: $quaternary-dark;
}

mat-form-field.mat-focused:not(.ng-invalid) label,
mat-form-field.mat-focused.ng-pristine label {
  color: $alternative-text-color;
}

mat-hint a {
  color: $primary;
  text-decoration: none;
}

// Checkboxes.
.mat-checkbox-checked .mat-checkbox-background {
  background-color: $primary !important;
}

.mat-checkbox-disabled .mat-checkbox-background {
  background-color: $disabled-button-color !important;
}

.mat-checkbox-frame {
  border: 2px solid $separator;
  border-radius: $border-radius;
}

// Dialogs.
.mat-dialog-container {
  min-width: $dialog-width !important;
  max-width: $dialog-width !important;
  color: $text-color;

  .mat-dialog-title {
    font-weight: normal;
  }

  .mat-dialog-content {
    font-size: $subhead-font-size-base;
    font-weight: 400;
    max-height: $dialog-max-height;
    overflow: unset;

    a {
      text-decoration: none;
      color: $primary;
    }

    p {
      margin: 0 0 $baseline-grid;
    }

    .km-dialog-warning {
      display: flex;
      margin: 2 * $baseline-grid 0;
    }
  }

  .mat-dialog-actions {
    justify-content: flex-end;
    padding: 0;
    margin: 0;
  }
}

// Tooltips.
.mat-tooltip-panel {
  height: 4 * $baseline-grid;
}

// Code blocks.
.km-code-block {
  background-color: $grey-background;
  border-radius: $baseline-grid / 1.5;
  margin: ($baseline-grid * 2) 0;
  padding: ($baseline-grid * 1.5) ($baseline-grid * 2);
  font-size: $body-font-size-base;
  line-height: 2 * $line-height;
  font-family: $code-block;
  color: $text-color;
}

// Font colors.
.km-color-primary {
  color: $primary !important;
}

// Dropdowns.
.mat-select-panel {
  margin-top: 3.75 * $baseline-grid !important;
  margin-left: 0.75 * $baseline-grid !important;
  min-width: calc(100% + 20px) !important;
  max-width: calc(100% + 20px) !important;
  transform-origin: 50% 0 0 !important;

  &.ng-animating {
    visibility: hidden;
  }
}

.km-optgroup-dropdown {
  margin-left: 2.75 * $baseline-grid !important;
}

.km-sshkey-dropdown {
  margin-left: 3.75 * $baseline-grid !important;
}

.km-add-dialog-dropdown {
  margin-top: 4.25 * $baseline-grid !important;
}

.mat-optgroup-label {
  font-size: $caption-font-size-base !important;
  line-height: 3.5 * $line-height !important;
  height: 3.5 * $line-height !important;
  padding-left: 1.25 * $baseline-grid !important;
  border-top: 1px solid $border !important;
}

.mat-option {
  padding: 0 0 0 (1.25 * $baseline-grid) !important;

  &:hover,
  &.mat-active {
    background-color: $secondary-light !important;
    color: $text-color !important;
  }
}

.mat-select-arrow-wrapper {
  top: 3px;
  right: 0;
  position: relative;
}

.mat-select-arrow {
  display: inline-block;
  width: 6px !important;
  height: 6px !important;
  mask: url("/assets/images/icons/arrow-down.svg");
  mask-repeat: no-repeat;
  mask-size: contain;
  background-color: $text-color;
}

.mat-form-field.mat-focused.mat-primary .mat-select-arrow-wrapper {
  right: 5px;

  .mat-select-arrow {
    -webkit-transform: rotate(180deg);
    transform: rotate(180deg);
  }
}

// Chips.
mat-chip-list {
  cursor: default;
  pointer-events: none;
}

.mat-chip.mat-standard-chip {
  background: $separator;
  border: 1px solid $separator;
  border-radius: $border-radius;
  color: $text-color;
  font-size: $body-font-size-base;
  font-weight: normal;
  line-height: $subhead-font-size-base;
  max-height: 22px;
  min-height: 22px;
  padding: (0.375 * $baseline-grid) (1.25 * $baseline-grid);

  &.km-chip-container {
    padding: 0;
  }

  div {
    align-items: center;
    display: flex;
    height: 100%;
    justify-content: center;
    padding: (0.375 * $baseline-grid) (1.25 * $baseline-grid);

    &.km-chip-accent {
      background: $white-background;
    }
  }
}

// Mat menu.
.mat-menu-item {
  padding: 0 (1.25 * $baseline-grid) !important;
  line-height: 4.2 * $line-height !important;
  height: 42px !important;

  .mat-icon {
    margin-right: 0 !important;
  }
}

.mat-menu-content {
  padding: 0 !important;
}

.mat-menu-panel {
  min-height: auto !important;
}
