<!--
Copyright 2020 The Kubermatic Kubernetes Platform contributors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<div class="km-cluster-summary km-wizard-summary summary-with-number"
     [fxLayout]="flipLayout ? 'column' : 'row'"
     fxLayout.lt-md="column">
  <div [fxFlex]="flipLayout ? '100%' : '50%'"
       fxLayout="column">
    <div class="step">
      <div class="header"
           [ngClass]="clusterTemplateEditMode ? '' : 'counter-1'">Provider</div>
      <div class="info-container">
        <div class="container-spacing"
             fxLayout="row wrap">
          <km-property>
            <div key>Provider</div>
            <div value><i class="km-provider-logo km-provider-logo-{{provider}}"></i></div>
          </km-property>
          <km-property>
            <div key>Datacenter</div>
            <div value>
              @if (datacenter?.spec) {
              <span>{{datacenter.spec.location}} ({{datacenter.spec.country}})</span>
              }
            </div>
          </km-property>
        </div>
      </div>
    </div>

    <div fxLayout="column"
         class="step">
      <div class="header"
           [ngClass]="clusterTemplateEditMode ? 'counter-1' : 'counter-2'">Cluster</div>
      <div class="info-container"
           fxLayout="row wrap">
        <div class="container-spacing">
          <div class="section-header">GENERAL</div>
          <div fxLayout="row wrap">
            <km-property>
              <div key>Name</div>
              <div value>
                @if (cluster.name) {
                <span>{{cluster.name}}</span>
                }
                @if (!cluster.name) {
                <span>Autogenerated name</span>
                }
              </div>
            </km-property>

            <km-property>
              <div key>Version</div>
              <div value>{{cluster.spec.version}}</div>
            </km-property>

            <km-property>
              <div key>Container Runtime</div>
              <div value>{{cluster.spec.containerRuntime}}</div>
            </km-property>

            @if (cluster.spec.backupConfig?.backupStorageLocation?.name) {
            <km-property>
              <div key>Cluster Backup</div>
              <div value>{{cluster.spec.backupConfig.backupStorageLocation.name}}</div>
            </km-property>
            }

            <km-property>
              <div key>SSH Keys</div>
              <div value>
                <km-ssh-key-list [sshKeys]="getSSHKeys()" />
              </div>
            </km-property>

            @if (displayTags(cluster.labels)) {
            <km-property>
              <div key>Cluster Labels</div>
              <div value>
                <km-labels [labels]="cluster.labels" />
              </div>
            </km-property>
            }
            @if (displayTags(cluster.annotations)) {
            <km-property>
              <div key>Cluster Annotations</div>
              <div value>
                <km-labels [labels]="getFilteredAnnotations(cluster.annotations)" />
              </div>
            </km-property>
            }
          </div>
        </div>

        @if (hasNetworkConfiguration) {
        <div class="container-spacing">
          <div class="section-header">NETWORK CONFIGURATION</div>

          <div fxLayout="row wrap">
            @if (cluster.spec.cniPlugin?.type) {
            <km-property>
              <div key>CNI Plugin</div>
              <div value>{{cluster.spec.cniPlugin.type}}</div>
            </km-property>
            }

            @if (cluster.spec.cniPlugin?.version) {
            <km-property>
              <div key>CNI Plugin Version</div>
              <div value>{{cluster.spec.cniPlugin.version}}</div>
            </km-property>
            }

            @if (cluster.spec.clusterNetwork?.proxyMode) {
            <km-property>
              <div key>Proxy Mode</div>
              <div value>{{cluster.spec.clusterNetwork.proxyMode}}</div>
            </km-property>
            }
            @if (cluster.spec.exposeStrategy) {
            <km-property>
              <div key>Expose Strategy</div>
              <div value>{{cluster.spec.exposeStrategy}}</div>
            </km-property>
            }

            @if (cluster.spec?.apiServerAllowedIPRanges?.cidrBlocks?.length) {
            <km-property>
              <div key>Allowed IP Ranges for API server</div>
              <div value>
                <km-labels [labels]="cluster.spec.apiServerAllowedIPRanges.cidrBlocks" />
              </div>
            </km-property>
            }

            @if (nodePortsAllowedIPRanges; as allowedIPRange) {
            <km-property>
              <div key>Allowed IP Ranges for Node Ports</div>
              <div value>
                <km-labels [labels]="allowedIPRange" />
              </div>
            </km-property>
            }

            @if (!showIPv4) {
            <ng-container [ngTemplateOutlet]="ipv4Properties" />
            }
          </div>

          @if (cluster.spec.clusterNetwork) {

          @if (showIPv4) {
          <div>
            <h4>IPv4</h4>

            <div fxLayout="row wrap">
              <ng-container *ngTemplateOutlet="ipv4Properties" />
            </div>
          </div>
          }

          @if (showIPv6) {

          <h4>IPv6</h4>

          <div fxLayout="row wrap">
            @if (cluster.spec.clusterNetwork?.pods?.cidrBlocks?.length > 1) {
            <km-property>
              <div key>Pods CIDR</div>
              <div value>{{cluster.spec.clusterNetwork.pods.cidrBlocks[1]}}</div>
            </km-property>
            }

            @if (cluster.spec.clusterNetwork?.services?.cidrBlocks?.length > 1) {
            <km-property>
              <div key>Services CIDR</div>
              <div value>{{cluster.spec.clusterNetwork.services.cidrBlocks[1]}}</div>
            </km-property>
            }

            @if (cluster.spec.clusterNetwork?.nodeCidrMaskSizeIPv6) {
            <km-property>
              <div key>Node CIDR Mask Size</div>
              <div value>{{cluster.spec.clusterNetwork.nodeCidrMaskSizeIPv6}}</div>
            </km-property>
            }
          </div>

          }

          @if (cluster.spec.clusterNetwork?.nodeLocalDNSCacheEnabled) {
          <km-property-boolean label="Node Local DNS Cache"
                               [value]="cluster.spec.clusterNetwork?.nodeLocalDNSCacheEnabled" />
          }

          @if (cluster.spec.clusterNetwork?.konnectivityEnabled) {
          <km-property-boolean label="Konnectivity"
                               [value]="cluster.spec.clusterNetwork?.konnectivityEnabled" />
          }

          }

          <ng-template #ipv4Properties>
            @if (cluster.spec.clusterNetwork?.pods?.cidrBlocks?.length) {
            <km-property>
              <div key>Pods CIDR</div>
              <div value>{{cluster.spec.clusterNetwork.pods.cidrBlocks[0]}}</div>
            </km-property>
            }

            @if (cluster.spec.clusterNetwork?.services?.cidrBlocks?.length) {
            <km-property>
              <div key>Services CIDR</div>
              <div value>{{cluster.spec.clusterNetwork.services.cidrBlocks[0]}}</div>
            </km-property>
            }

            @if (cluster.spec.clusterNetwork?.nodeCidrMaskSizeIPv4) {
            <km-property>
              <div key>Node CIDR Mask Size</div>
              <div value>{{cluster.spec.clusterNetwork.nodeCidrMaskSizeIPv4}}</div>
            </km-property>
            }
          </ng-template>
        </div>
        }

        <div class="container-spacing">
          <div class="section-header">SPECIFICATION</div>

          <div fxLayout="row wrap">
            @if (cluster.spec.auditLogging?.enabled) {
            <div fxLayout="row">
              <km-property-boolean label="Audit Logging"
                                   [value]="cluster.spec.auditLogging?.enabled" />
              @if (cluster.spec.auditLogging?.enabled) {
              <span class="km-label-primary secondary">{{cluster.spec.auditLogging.policyPreset || 'custom'}}</span>
              }
            </div>
            }

            @if (cluster.spec.enableUserSSHKeyAgent) {
            <km-property-boolean label="User SSH Key Agent"
                                 [value]="cluster.spec.enableUserSSHKeyAgent" />
            }

            @if (cluster.spec.kubelb?.enabled) {
            <km-property-boolean label="Kubermatic KubeLB"
                                 [value]="cluster.spec.kubelb?.enabled" />
            }

            @if (cluster.spec.kubelb?.enabled && cluster.spec.kubelb?.useLoadBalancerClass) {
            <km-property-boolean label="KubeLB: Use LoadBalancer Class"
                                 [value]="cluster.spec.kubelb?.useLoadBalancerClass" />
            }

            @if (cluster.spec.kubelb?.enabled && cluster.spec.kubelb?.enableGatewayAPI) {
            <km-property-boolean label="KubeLB: Enable Gateway API"
                                 [value]="cluster.spec.kubelb?.enableGatewayAPI" />
            }

            @if (cluster.spec.opaIntegration?.enabled) {
            <km-property-boolean label="OPA Integration"
                                 [value]="cluster.spec.opaIntegration?.enabled" />
            }

            @if (cluster.spec.kyverno?.enabled) {
            <km-property-boolean label="Kyverno Policy Management"
                                 [value]="cluster.spec.kyverno.enabled" />
            }

            @if (isMLAEnabled && cluster.spec.mla?.loggingEnabled) {
            <km-property-boolean label="User Cluster Logging"
                                 [value]="cluster.spec.mla?.loggingEnabled" />
            }

            @if (isMLAEnabled && cluster.spec.mla?.loggingEnabled) {
            <km-property-boolean label="User Cluster Monitoring"
                                 [value]="cluster.spec.mla?.monitoringEnabled" />
            }

            @if (cluster.spec.kubernetesDashboard?.enabled) {
            <km-property-boolean label="Kubernetes Dashboard"
                                 [value]="cluster.spec.kubernetesDashboard?.enabled" />
            }

            @if (cluster.spec.disableCsiDriver) {
            <km-property-boolean label="CSI Storage Driver"
                                 [value]="!cluster.spec.disableCsiDriver" />
            }
            @if (cluster.spec.backupConfig) {
            <km-property-boolean label="Cluster Backup"
                                 [value]="!!cluster.spec.backupConfig" />
            }

            @if (cluster.spec.encryptionConfiguration?.enabled) {
            <km-property-boolean label="Encryption at Rest"
                                 [value]="cluster.spec.encryptionConfiguration?.enabled" />
            }
          </div>
          <div fxLayout="row wrap">
            @if (cluster.spec.auditLogging?.webhookBackend; as webhookBackend) {

            <km-property>
              <div key>Audit Webhook Backend Secret Name</div>
              <div value>{{webhookBackend.auditWebhookConfig.name}}</div>
            </km-property>
            <km-property>
              <div key>Audit Webhook Backend Secret Namespace</div>
              <div value>{{webhookBackend.auditWebhookConfig.namespace}}</div>
            </km-property>
            @if (webhookBackend.auditWebhookInitialBackoff) {
            <km-property>
              <div key>Audit Webhook Backend Initial Backoff</div>
              <div value>{{webhookBackend.auditWebhookInitialBackoff}}</div>
            </km-property>
            }

            }
          </div>
        </div>

        @if (hasAdmissionPlugins) {
        <div class="container-spacing">
          <div class="section-header">ADMISSION PLUGINS</div>

          <div fxLayout="row wrap">
            @for (plugin of admissionPlugins; track plugin) {
            <km-property-boolean [label]="getAdmissionPluginName(plugin)"
                                 [value]="isAdmissionPluginEnabled(plugin)" />
            }

            @if (eventRateLimitTypes?.length) {
            <km-property>
              <div key>Event Rate Limit Config</div>
              @for (event of eventRateLimitTypes; track event) {
              <div value
                   fxLayout="row wrap"
                   fxLayoutGap="10px">
                <div><span class="km-text-muted">Limit Type:</span> {{event}}</div>
                <div><span class="km-text-muted">QPS:</span> {{cluster.spec.eventRateLimitConfig[event].qps}}</div>
                <div><span class="km-text-muted">Burst:</span> {{cluster.spec.eventRateLimitConfig[event].burst}}</div>
                <div><span class="km-text-muted">Cache Size:</span> {{cluster.spec.eventRateLimitConfig[event].cacheSize}}</div>
              </div>
              }
            </km-property>
            }

            @if (cluster?.spec?.podNodeSelectorAdmissionPluginConfig) {
            <km-property>
              <div key>Pod Node Selector Config</div>
              <div value>
                <km-labels [labels]="cluster?.spec?.podNodeSelectorAdmissionPluginConfig"
                           emptyMessage="No assigned labels" />
              </div>
            </km-property>
            }
          </div>
        </div>
        }
      </div>
    </div>

    @if (!cluster.spec.cloud?.bringyourown && !cluster.spec.cloud?.edge && (cluster.credential || displaySettings())) {
    <div class="step">
      <div class="header"
           [ngClass]="clusterTemplateEditMode ? 'counter-2' : 'counter-3'">Settings</div>
      <div class="properties"
           [fxLayout]="cluster.spec.cloud?.kubevirt ? 'column' : 'row wrap'">
        @if (cluster.credential) {
        <km-property>
          <div key>Preset</div>
          <div value>{{cluster.credential}}</div>
        </km-property>
        }

        @if (displaySettings()) {

        <!-- AWS -->
        @if (cluster.spec.cloud?.aws) {

        @if (cluster.spec.cloud?.aws?.securityGroupID) {
        <km-property>
          <div key>Security Group ID</div>
          <div value>{{cluster.spec.cloud?.aws?.securityGroupID}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.aws?.vpcID) {
        <km-property>
          <div key>VPC ID</div>
          <div value>{{cluster.spec.cloud?.aws?.vpcID}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.aws?.routeTableID) {
        <km-property>
          <div key>Route Table ID</div>
          <div value>{{cluster.spec.cloud?.aws?.routeTableID}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.aws?.instanceProfileName) {
        <km-property>
          <div key>Instance Profile Name</div>
          <div value>{{cluster.spec.cloud?.aws?.instanceProfileName}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.aws?.roleARN) {
        <km-property>
          <div key>Control Plane Role (ARN)</div>
          <div value>{{cluster.spec.cloud?.aws?.roleARN}}</div>
        </km-property>
        }

        }

        <!-- Azure -->
        @if (cluster.spec.cloud?.azure) {

        @if (cluster.spec.cloud?.azure.loadBalancerSKU) {
        <km-property>
          <div key>LoadBalancer SKU</div>
          <div value>{{cluster.spec.cloud?.azure.loadBalancerSKU}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.azure.resourceGroup) {
        <km-property>
          <div key>Resource Group</div>
          <div value>{{cluster.spec.cloud?.azure.resourceGroup}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.azure.vnetResourceGroup) {
        <km-property>
          <div key>VNet Resource Group</div>
          <div value>{{cluster.spec.cloud?.azure.vnetResourceGroup}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.azure.routeTable) {
        <km-property>
          <div key>Route Table</div>
          <div value>{{cluster.spec.cloud?.azure.routeTable}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.azure.securityGroup) {
        <km-property>
          <div key>Security Group</div>
          <div value>{{cluster.spec.cloud?.azure.securityGroup}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.azure.subnet) {
        <km-property>
          <div key>Subnet</div>
          <div value>{{cluster.spec.cloud?.azure.subnet}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.azure.vnet) {
        <km-property>
          <div key>VNet</div>
          <div value>{{cluster.spec.cloud?.azure.vnet}}</div>
        </km-property>
        }

        @if (cluster.spec.cloud?.azure?.assignAvailabilitySet !== undefined) {
        <km-property-boolean label="Assign Availability Set"
                             [value]="cluster.spec.cloud.azure.assignAvailabilitySet" />
        }

        }

        <!-- GCP -->
        @if (cluster.spec.cloud?.gcp) {

        @if (cluster.spec.cloud?.gcp?.network) {
        <km-property>
          <div key>Network</div>
          <div value>{{cluster.spec.cloud?.gcp?.network}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.gcp?.subnetwork) {
        <km-property>
          <div key>Subnetwork</div>
          <div value>{{cluster.spec.cloud?.gcp?.subnetwork}}</div>
        </km-property>
        }

        }

        <!-- Hetzner -->
        @if (cluster.spec.cloud?.hetzner) {

        @if (cluster.spec.cloud?.hetzner.network) {
        <km-property>
          <div key>Network</div>
          <div value>{{cluster.spec.cloud?.hetzner.network}}</div>
        </km-property>
        }

        }

        <!-- Openstack -->
        @if (cluster.spec.cloud?.openstack) {

        @if (cluster.spec.cloud?.openstack.domain) {
        <km-property>
          <div key>Domain</div>
          <div value>{{cluster.spec.cloud?.openstack.domain}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.username) {
        <km-property>
          <div key>Username</div>
          <div value>{{cluster.spec.cloud?.openstack.username}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.applicationCredentialID) {
        <km-property>
          <div key>Application Credential ID</div>
          <div value>{{cluster.spec.cloud.openstack.applicationCredentialID}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.project) {
        <km-property>
          <div key>Project</div>
          <div value>{{cluster.spec.cloud?.openstack.project}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.projectID) {
        <km-property>
          <div key>Project ID</div>
          <div value>{{cluster.spec.cloud?.openstack.projectID}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.network) {
        <km-property>
          <div key>Network Name</div>
          <div value>{{cluster.spec.cloud?.openstack.network}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.securityGroups) {
        <km-property>
          <div key>Security Groups</div>
          <div value>{{cluster.spec.cloud?.openstack.securityGroups}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.floatingIPPool) {
        <km-property>
          <div key>Floating IP Pool</div>
          <div value>{{cluster.spec.cloud?.openstack.floatingIPPool}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.subnetID) {
        <km-property>
          <div key>IPv4 Subnet ID</div>
          <div value>{{cluster.spec.cloud?.openstack.subnetID}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.ipv6SubnetID) {
        <km-property>
          <div key>IPv6 Subnet ID</div>
          <div value>{{cluster.spec.cloud?.openstack.ipv6SubnetID}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.ipv6SubnetPool) {
        <km-property>
          <div key>IPv6 Subnet Pool</div>
          <div value>{{cluster.spec.cloud?.openstack.ipv6SubnetPool}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.enableIngressHostname !== undefined) {
        <km-property-boolean label="Enable Ingress Hostname"
                             [value]="cluster.spec.cloud?.openstack.enableIngressHostname">
        </km-property-boolean>
        }
        @if (cluster.spec.cloud?.openstack.ingressHostnameSuffix) {
        <km-property>
          <div key>Ingress Hostname Suffix</div>
          <div value>{{cluster.spec.cloud?.openstack.ingressHostnameSuffix}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.openstack.loadBalancerClasses?.length > 0) {
        <km-property>
          <div key>LoadBalancer Classes</div>
          <div value>
            <mat-chip-set selectable="false">
              @for (lbClass of cluster.spec.cloud.openstack.loadBalancerClasses; track lbClass) {
              <mat-chip>
                {{lbClass.name}}
              </mat-chip>
              }
            </mat-chip-set>
          </div>
        </km-property>
        }

        }

        <!-- Nutanix -->
        @if (cluster.spec.cloud?.nutanix) {

        @if (cluster.spec.cloud.nutanix.username) {
        <km-property>
          <div key>Username</div>
          <div value>{{cluster.spec.cloud.nutanix.username}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud.nutanix.proxyURL) {
        <km-property>
          <div key>Proxy URL</div>
          <div value>{{cluster.spec.cloud.nutanix.proxyURL}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud.nutanix.clusterName) {
        <km-property>
          <div key>Cluster Name</div>
          <div value>{{cluster.spec.cloud.nutanix.clusterName}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud.nutanix.projectName) {
        <km-property>
          <div key>Project Name</div>
          <div value>{{cluster.spec.cloud.nutanix.projectName}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.nutanix?.csi) {

        @if (cluster.spec.cloud.nutanix.csi.username) {
        <km-property>
          <div key>Prism Element Username</div>
          <div value>{{cluster.spec.cloud.nutanix.csi.username}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud.nutanix.csi.endpoint) {
        <km-property>
          <div key>Prism Element Endpoint</div>
          <div value>{{cluster.spec.cloud.nutanix.csi.endpoint}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud.nutanix.csi.port !== undefined) {
        <km-property>
          <div key>Prism Element Port</div>
          <div value>{{cluster.spec.cloud.nutanix.csi.port}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud.nutanix.csi.storageContainer) {
        <km-property>
          <div key>Prism Element Storage Container</div>
          <div value>{{cluster.spec.cloud.nutanix.csi.storageContainer}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud.nutanix.csi.fstype) {
        <km-property>
          <div key>Prism Element Storage Fstype</div>
          <div value>{{cluster.spec.cloud.nutanix.csi.fstype}}</div>
        </km-property>
        }

        }

        }

        <!-- vSphere -->
        @if (cluster.spec.cloud?.vsphere) {

        @if (cluster.spec.cloud?.vsphere.username) {
        <km-property>
          <div key>Username</div>
          <div value>{{cluster.spec.cloud?.vsphere.username}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.vsphere?.infraManagementUser?.username) {
        <km-property>
          <div key>Infrastructure Management Username</div>
          <div value>{{cluster.spec.cloud?.vsphere?.infraManagementUser?.username}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.vsphere?.networks) {
        <km-property>
          <div key>Networks</div>
          <div value>{{cluster.spec.cloud?.vsphere?.networks}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.vsphere.folder) {
        <km-property>
          <div key>Folder</div>
          <div value>{{cluster.spec.cloud?.vsphere.folder}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.vsphere.basePath) {
        <km-property>
          <div key>Base Folder Path</div>
          <div value>{{cluster.spec.cloud?.vsphere.basePath}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.vsphere.datastore) {
        <km-property>
          <div key>Datastore</div>
          <div value>{{cluster.spec.cloud?.vsphere.datastore}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.vsphere.datastoreCluster) {
        <km-property>
          <div key>Datastore Cluster</div>
          <div value>{{cluster.spec.cloud?.vsphere.datastoreCluster}}</div>
        </km-property>
        }
        @if (cluster.spec.cloud?.vsphere.resourcePool) {
        <km-property>
          <div key>Resource Pool</div>
          <div value>{{cluster.spec.cloud?.vsphere.resourcePool}}</div>
        </km-property>
        }

        }

        <!-- VMware Cloud Director -->
        @if (cluster.spec.cloud?.vmwareclouddirector; as vmwareclouddirector) {

        @if (vmwareclouddirector.username) {
        <km-property>
          <div key>Username</div>
          <div value>{{vmwareclouddirector.username}}</div>
        </km-property>
        }
        @if (vmwareclouddirector.organization) {
        <km-property>
          <div key>Organization</div>
          <div value>{{vmwareclouddirector.organization}}</div>
        </km-property>
        }
        @if (vmwareclouddirector.vdc) {
        <km-property>
          <div key>VDC</div>
          <div value>{{vmwareclouddirector.vdc}}</div>
        </km-property>
        }
        @if (vmwareclouddirector.ovdcNetworks) {
        <km-property>
          <div key>Organization VDC Networks</div>
          <div value>{{vmwareclouddirector.ovdcNetworks}}</div>
        </km-property>
        }
        @if (vmwareclouddirector.vapp) {
        <km-property>
          <div key>VApp</div>
          <div value>{{vmwareclouddirector.vapp}}</div>
        </km-property>
        }
        @if (vmwareclouddirector.csi) {

        @if (vmwareclouddirector.csi.storageProfile) {
        <km-property>
          <div key>Storage Profile</div>
          <div value>{{vmwareclouddirector.csi.storageProfile}}</div>
        </km-property>
        }
        @if (vmwareclouddirector.csi.filesystem) {
        <km-property>
          <div key>Filesystem</div>
          <div value>{{vmwareclouddirector.csi.filesystem}}</div>
        </km-property>
        }

        }

        }

        }
      </div>
    </div>
    }
  </div>

  <div [fxFlex]="flipLayout ? '100%' : '50%'"
       fxLayout="column"
       class="step padding-top"
       [class.padding-top-force]="flipLayout">
    @if (!cluster.spec.cloud?.bringyourown) {
    <div class="step">
      <div class="header"
           [ngClass]="clusterTemplateEditMode || cluster.spec.cloud?.edge ? 'counter-3' : 'counter-4'">
        Initial Nodes
      </div>
      <div class="info-container">
        <div class="container-spacing">
          <div class="section-header">GENERAL</div>

          <div fxLayout="row wrap">
            @if (machineDeployment.spec.replicas > 0) {
            <km-property>
              <div key>Name</div>
              <div value>
                @if (machineDeployment.name) {
                <span>{{machineDeployment.name}}</span>
                }
                @if (!machineDeployment.name) {
                <span>Autogenerated name</span>
                }
              </div>
            </km-property>
            }

            <km-property>
              <div key>Replicas</div>
              <div value>{{machineDeployment.spec.replicas}}</div>
            </km-property>

            @if (operatingSystem) {
            <km-property>
              <div key>Operating System</div>
              <div value
                   fxLayout="row"
                   fxLayoutAlign=" center"
                   fxLayoutGap="10px">
                <i class="km-os-image km-os-image-{{operatingSystemLogoClass}}"></i>
                <span>{{operatingSystem}}</span>
              </div>
            </km-property>
            }

            @if (operatingSystemProfile) {
            <km-property>
              <div key>Operating System Profile</div>
              <div value>{{operatingSystemProfile}}</div>
            </km-property>
            }

            @if (machineDeployment.spec.template.operatingSystem.ubuntu?.distUpgradeOnBoot) {
            <km-property-boolean label="Upgrade system on the first boot"
                                 [value]="machineDeployment.spec.template.operatingSystem.ubuntu.distUpgradeOnBoot" />
            }

            @if (machineDeployment.spec.template.operatingSystem.amzn2?.distUpgradeOnBoot) {
            <km-property-boolean label="Upgrade system on the first boot"
                                 [value]="machineDeployment.spec.template.operatingSystem.amzn2.distUpgradeOnBoot" />
            }

            @if (machineDeployment.spec.template.operatingSystem.rhel?.distUpgradeOnBoot) {
            <km-property-boolean label="Upgrade system on the first boot"
                                 [value]="machineDeployment.spec.template.operatingSystem.rhel.distUpgradeOnBoot" />
            }

            @if (machineDeployment.spec.template.operatingSystem.rockylinux?.distUpgradeOnBoot) {
            <km-property-boolean label="Upgrade system on the first boot"
                                 [value]="machineDeployment.spec.template.operatingSystem.rockylinux.distUpgradeOnBoot" />
            }

            @if (machineDeployment.spec.template.operatingSystem.flatcar?.disableAutoUpdate) {
            <km-property-boolean label="Disable system auto-update"
                                 [value]="machineDeployment.spec.template.operatingSystem.flatcar.disableAutoUpdate" />
            }

            @if (machineDeployment.spec.template.network?.cidr) {
            <km-property>
              <div key>CIDR</div>
              <div value>{{machineDeployment.spec.template.network?.cidr}}</div>
            </km-property>
            }

            @if (machineDeployment.spec.template.network?.gateway) {
            <km-property>
              <div key>Gateway</div>
              <div value>{{machineDeployment.spec.template.network?.gateway}}</div>
            </km-property>
            }

            @if (machineDeployment.spec.template.network?.dns?.servers) {
            <km-property>
              <div key>DNS Servers</div>
              <div value>{{machineDeployment.spec.template.network?.dns?.servers}}</div>
            </km-property>
            }

            @if (machineDeployment.spec.dynamicConfig) {
            <km-property-boolean label="Dynamic kubelet Config"
                                 [value]="machineDeployment.spec.dynamicConfig" />
            }

            @if (machineDeployment.spec.minReplicas; as minReplicas) {
            <km-property>
              <div key>Min Replicas</div>
              <div value>{{minReplicas}}</div>
            </km-property>
            }

            @if (machineDeployment.spec.maxReplicas; as maxReplicas) {
            <km-property>
              <div key>Max Replicas</div>
              <div value>{{maxReplicas}}</div>
            </km-property>
            }

            @if (displayTags(machineDeployment.spec.template.labels)) {
            <km-property>
              <div key>Node Labels</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.labels" />
              </div>
            </km-property>
            }

            @if (machineDeployment.spec.template.taints?.length > 0) {
            <km-property>
              <div key>Node Taints</div>
              <div value>
                <km-taints [taints]="machineDeployment.spec.template.taints" />
              </div>
            </km-property>
            }

            @if (machineDeployment.spec.template.annotations) {
            <km-property>
              <div key>Node Annotations</div>
              <div value>
                <km-labels [labels]="getFilteredAnnotations(machineDeployment.spec.template.annotations)" />
              </div>
            </km-property>
            }

            @if (machineDeployment.annotations) {
            <km-property>
              <div key>Machine Deployment Annotations</div>
              <div value>
                <km-labels [labels]="getFilteredAnnotations(machineDeployment.annotations)" />
              </div>
            </km-property>
            }
          </div>
        </div>

        <div class="container-spacing">
          <div class="section-header">PROVIDER</div>
          <!-- Do not display node info if replica count is set to 0 -->
          @if (machineDeployment.spec.replicas > 0) {
          <div fxLayout="row wrap">
            <!-- Alibaba Nodes -->
            @if (cluster.spec.cloud?.alibaba) {

            <km-property>
              <div key>Instance Type</div>
              <div value>{{machineDeployment.spec.template.cloud?.alibaba.instanceType}}</div>
            </km-property>
            <km-property>
              <div key>Disk Size</div>
              <div value>{{machineDeployment.spec.template.cloud?.alibaba.diskSize}} GB</div>
            </km-property>
            <km-property>
              <div key>Disk Type</div>
              <div value>{{machineDeployment.spec.template.cloud?.alibaba.diskType}}</div>
            </km-property>
            @if (machineDeployment.spec.template.cloud?.alibaba.vSwitchID) {
            <km-property>
              <div key>vSwitch ID</div>
              <div value>{{machineDeployment.spec.template.cloud?.alibaba.vSwitchID}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.alibaba.internetMaxBandwidthOut) {
            <km-property>
              <div key>Internet Max Bandwidth Out</div>
              <div value>{{machineDeployment.spec.template.cloud?.alibaba.internetMaxBandwidthOut}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.alibaba.zoneID) {
            <km-property>
              <div key>Zone ID</div>
              <div value>{{machineDeployment.spec.template.cloud?.alibaba.zoneID}}</div>
            </km-property>
            }

            }

            <!-- AWS Nodes -->
            @if (cluster.spec.cloud?.aws) {

            <km-property>
              <div key>Instance Type</div>
              <div value>{{machineDeployment.spec.template.cloud?.aws?.instanceType}}</div>
            </km-property>
            <km-property>
              <div key>Disk Size</div>
              <div value>{{machineDeployment.spec.template.cloud?.aws?.diskSize}} GB</div>
            </km-property>
            <km-property>
              <div key>Volume Type</div>
              <div value>{{machineDeployment.spec.template.cloud?.aws?.volumeType}}</div>
            </km-property>
            @if (machineDeployment.spec.template.cloud?.aws?.subnetID) {
            <km-property>
              <div key>Subnet ID</div>
              <div value>{{machineDeployment.spec.template.cloud?.aws?.subnetID}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.aws?.availabilityZone) {
            <km-property>
              <div key>Availability Zone</div>
              <div value>{{machineDeployment.spec.template.cloud?.aws?.availabilityZone}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.aws?.ami) {
            <km-property>
              <div key>AMI ID</div>
              <div value>{{machineDeployment.spec.template.cloud?.aws?.ami}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.aws?.spotInstanceMaxPrice > 0) {
            <km-property>
              <div key>Spot Instance Max Price</div>
              <div value>
                {{machineDeployment.spec.template.cloud.aws.spotInstanceMaxPrice | currency:'USD':'symbol':'1.0-4'}}
              </div>
            </km-property>
            }

            }

            <!-- Azure Nodes -->
            @if (cluster.spec.cloud?.azure) {

            <km-property>
              <div key>Node Size</div>
              <div value>{{machineDeployment.spec.template.cloud?.azure.size}}</div>
            </km-property>
            @if (!cluster.spec.cloud.azure.assignAvailabilitySet && machineDeployment.spec.template.cloud?.azure.zones) {
            <km-property>
              <div key>Zones</div>
              <div value>{{machineDeployment.spec.template.cloud?.azure.zones}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.azure.imageID) {
            <km-property>
              <div key>Image ID</div>
              <div value>{{machineDeployment.spec.template.cloud?.azure.imageID}}</div>
            </km-property>
            }
            <km-property>
              <div key>Data Disk Size</div>
              @if (machineDeployment.spec.template.cloud?.azure.dataDiskSize === 0) {
              <div value>Default</div>
              }
              @if (machineDeployment.spec.template.cloud?.azure.dataDiskSize !== 0) {
              <div value>
                {{machineDeployment.spec.template.cloud?.azure.dataDiskSize}} GB
              </div>
              }
            </km-property>
            <km-property>
              <div key>OS Disk Size</div>
              @if (machineDeployment.spec.template.cloud?.azure.osDiskSize === 0) {
              <div value>Default</div>
              }
              @if (machineDeployment.spec.template.cloud?.azure.osDiskSize !== 0) {
              <div value>
                {{machineDeployment.spec.template.cloud?.azure.osDiskSize}} GB
              </div>
              }
            </km-property>

            }

            <!-- DigitalOcean Nodes -->
            @if (cluster.spec.cloud?.digitalocean) {

            <km-property>
              <div key>Node Size</div>
              <div value>{{machineDeployment.spec.template.cloud?.digitalocean?.size}}</div>
            </km-property>

            }

            <!-- GCP Nodes -->
            @if (cluster.spec.cloud?.gcp) {

            <km-property>
              <div key>Disk Size</div>
              <div value>{{machineDeployment.spec.template.cloud?.gcp?.diskSize}} GB</div>
            </km-property>
            <km-property>
              <div key>Disk Type</div>
              <div value>{{machineDeployment.spec.template.cloud?.gcp?.diskType}}</div>
            </km-property>
            <km-property>
              <div key>Machine Type</div>
              <div value>{{machineDeployment.spec.template.cloud?.gcp?.machineType}}</div>
            </km-property>
            <km-property>
              <div key>Zone</div>
              <div value>{{machineDeployment.spec.template.cloud?.gcp?.zone}}</div>
            </km-property>

            }

            <!-- Hetzner Nodes -->
            @if (cluster.spec.cloud?.hetzner) {

            <km-property>
              <div key>Node Type</div>
              <div value>{{machineDeployment.spec.template.cloud?.hetzner?.type}}</div>
            </km-property>

            }

            <!-- KubeVirt Nodes -->
            @if (cluster.spec.cloud?.kubevirt) {

            @if (machineDeployment.spec.template.cloud?.kubevirt.cpus) {
            <km-property>
              <div key>CPUs</div>
              <div value>{{machineDeployment.spec.template.cloud?.kubevirt.cpus}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.kubevirt.memory) {
            <km-property>
              <div key>Memory</div>
              <div value>{{machineDeployment.spec.template.cloud?.kubevirt.memory}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.kubevirt.instancetype; as instanceType) {
            <km-property>
              <div key>Instance Type</div>
              <div value>
                <mat-chip>
                  <div>{{getKubeVirtInstanceTypeCategory(instanceType)}}</div>
                  <div class="km-chip-accent">{{instanceType.name}}</div>
                </mat-chip>
              </div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.kubevirt.preference; as preference) {
            <km-property>
              <div key>Preference</div>
              <div value>
                <mat-chip>
                  <div>{{getKubeVirtPreferenceCategory(preference)}}</div>
                  <div class="km-chip-accent">{{preference.name}}</div>
                </mat-chip>
              </div>
            </km-property>
            }
            <km-property>
              <div key>Operating System Image</div>
              <div value>{{machineDeployment.spec.template.cloud?.kubevirt.primaryDiskOSImage}}</div>
            </km-property>
            <km-property>
              <div key>Storage Class</div>
              <div value>{{machineDeployment.spec.template.cloud?.kubevirt.primaryDiskStorageClassName}}</div>
            </km-property>
            <km-property>
              <div key>Size</div>
              <div value>{{machineDeployment.spec.template.cloud?.kubevirt.primaryDiskSize}}</div>
            </km-property>
            @if (machineDeployment.spec.template.cloud?.kubevirt?.subnet) {
            <km-property>
              <div key>Subnet</div>
              <div value>{{machineDeployment.spec.template.cloud?.kubevirt.subnet}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.kubevirt.nodeAffinityPreset; as nodeAffinityPreset) {

            <km-property>
              <div key>Node Affinity Preset</div>
              <div value>{{nodeAffinityPreset.Type}}</div>
            </km-property>
            @if (nodeAffinityPreset.Key) {
            <km-property>
              <div key>Node Affinity Preset Key</div>
              <div value>{{nodeAffinityPreset.Key}}</div>
            </km-property>
            }
            @if (nodeAffinityPreset.Values?.length) {
            <km-property>
              <div key>Node Affinity Preset Values</div>
              <div value>{{nodeAffinityPreset.Values.join(', ')}}</div>
            </km-property>
            }

            }
            @if (machineDeployment.spec.template.cloud?.kubevirt.topologySpreadConstraints?.length > 0) {
            <km-property>
              <div key>Topology Spread Constraints</div>
              <div value>
                <mat-chip-set selectable="false">
                  @for (constraint of machineDeployment.spec.template.cloud?.kubevirt.topologySpreadConstraints; track constraint) {
                  <mat-chip>
                    <div>{{constraint.topologyKey}}</div>
                    <div class="km-chip-accent">{{constraint.maxSkew}}</div>
                    <div>{{constraint.whenUnsatisfiable}}</div>
                  </mat-chip>
                  }
                </mat-chip-set>
              </div>
            </km-property>
            }

            }

            <!-- Nutanix Nodes -->
            @if (cluster.spec.cloud?.nutanix) {

            <km-property>
              <div key>Image Name</div>
              <div value>{{machineDeployment.spec.template.cloud.nutanix.imageName}}</div>
            </km-property>
            <km-property>
              <div key>Subnet Name</div>
              <div value>{{machineDeployment.spec.template.cloud.nutanix.subnetName}}</div>
            </km-property>
            <km-property>
              <div key>CPUs</div>
              <div value>{{machineDeployment.spec.template.cloud.nutanix.cpus}}</div>
            </km-property>
            <km-property>
              <div key>Cores per CPU</div>
              <div value>{{machineDeployment.spec.template.cloud.nutanix.cpuCores}}</div>
            </km-property>
            <km-property>
              <div key>Memory</div>
              <div value>{{machineDeployment.spec.template.cloud.nutanix.memoryMB}} MB</div>
            </km-property>
            <km-property>
              <div key>Disk Size</div>
              <div value>{{machineDeployment.spec.template.cloud.nutanix.diskSize}} GB</div>
            </km-property>
            @if (displayTags(machineDeployment.spec.template.cloud.nutanix.categories)) {
            <km-property>
              <div key>Categories</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud.nutanix.categories" />
              </div>
            </km-property>
            }

            }
            @if (machineDeployment.spec.template.cloud.nutanix?.cpuPassthrough) {
            <km-property-boolean label="CPU Passthrough"
                                 [value]="machineDeployment.spec.template.cloud.nutanix.cpuPassthrough" />
            }

            <!-- Openstack Nodes -->
            @if (cluster.spec.cloud?.openstack) {

            <km-property>
              <div key>Flavor</div>
              <div value>{{machineDeployment.spec.template.cloud?.openstack.flavor}}</div>
            </km-property>
            @if (machineDeployment.spec.template.cloud?.openstack?.diskSize) {
            <km-property>
              <div key>Custom Disk Size</div>
              <div value>{{machineDeployment.spec.template.cloud?.openstack.diskSize}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.openstack?.availabilityZone) {
            <km-property>
              <div key>Availability Zone</div>
              <div value>{{machineDeployment.spec.template.cloud?.openstack.availabilityZone}}</div>
            </km-property>
            }
            <km-property>
              <div key>Image</div>
              <div value>{{machineDeployment.spec.template.cloud?.openstack.image}}</div>
            </km-property>
            <km-property>
              <div key>Instance Ready Check Period</div>
              <div value>{{machineDeployment.spec.template.cloud?.openstack.instanceReadyCheckPeriod}}</div>
            </km-property>
            <km-property>
              <div key>Instance Ready Check Timeout</div>
              <div value>{{machineDeployment.spec.template.cloud?.openstack.instanceReadyCheckTimeout}}</div>
            </km-property>

            }



            <!-- VSphere Nodes -->
            @if (cluster.spec.cloud?.vsphere) {

            <km-property>
              <div key>CPUs</div>
              <div value>{{machineDeployment.spec.template.cloud?.vsphere?.cpus}}</div>
            </km-property>
            <km-property>
              <div key>Memory</div>
              <div value>{{machineDeployment.spec.template.cloud?.vsphere?.memory}} MB</div>
            </km-property>
            @if (machineDeployment.spec.template.cloud?.vsphere?.diskSizeGB) {
            <km-property>
              <div key>Disk Size</div>
              <div value>{{machineDeployment.spec.template.cloud?.vsphere?.diskSizeGB}} GB</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.vsphere?.template) {
            <km-property>
              <div key>Template</div>
              <div value>{{machineDeployment.spec.template.cloud?.vsphere?.template}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.vsphere?.vmGroup) {
            <km-property>
              <div key>VM Group</div>
              <div value>{{machineDeployment.spec.template.cloud?.vsphere?.vmGroup}}</div>
            </km-property>
            }
            <km-property-boolean label="VM Anti Affinity"
                                 [value]="machineDeployment.spec.template.cloud?.vsphere?.vmAntiAffinity" />

            }

            <!-- Anexia Nodes -->
            @if (cluster.spec.cloud?.anexia) {

            <km-property>
              <div key>Number of CPUs</div>
              <div value>{{machineDeployment.spec.template.cloud?.anexia?.cpus}}</div>
            </km-property>
            <km-property>
              <div key>Memory in MB</div>
              <div value>{{machineDeployment.spec.template.cloud?.anexia?.memory}}</div>
            </km-property>
            @if (machineDeployment.spec.template.cloud?.anexia?.disks?.length > 0) {
            <km-property>
              <div key>Disks</div>
              <div value>
                <mat-chip-set selectable="false">
                  @for (disk of machineDeployment.spec.template.cloud?.anexia?.disks; track disk) {
                  <mat-chip>
                    <div>{{disk.size}}GB</div>
                    @if (disk.performanceType) {
                    <div class="km-chip-accent">{{disk.performanceType}}</div>
                    }
                  </mat-chip>
                  }
                </mat-chip-set>
              </div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.anexia?.templateID) {
            <km-property>
              <div key>Template ID</div>
              <div value>{{machineDeployment.spec.template.cloud?.anexia?.templateID}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud?.anexia?.template) {
            <km-property>
              <div key>Template Name</div>
              <div value>{{machineDeployment.spec.template.cloud?.anexia?.template}}</div>
            </km-property>
            }
            <km-property>
              <div key>VLAN ID</div>
              <div value>{{machineDeployment.spec.template.cloud?.anexia?.vlanID}}</div>
            </km-property>

            }

            <!-- VMware Cloud Director Nodes -->
            @if (cluster.spec.cloud?.vmwareclouddirector) {

            <km-property>
              <div key>CPUs</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.cpus}}</div>
            </km-property>
            <km-property>
              <div key>Cores per CPU</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.cpuCores}}</div>
            </km-property>
            <km-property>
              <div key>Memory</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.memoryMB}} MB</div>
            </km-property>
            <km-property>
              <div key>Disk Size</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.diskSizeGB}} GB</div>
            </km-property>
            @if (machineDeployment.spec.template.cloud.vmwareclouddirector.diskIOPS) {
            <km-property>
              <div key>Disk IOPS</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.diskIOPS}}</div>
            </km-property>
            }
            <km-property>
              <div key>Storage Profile</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.storageProfile}}</div>
            </km-property>
            @if (machineDeployment.spec.template.cloud.vmwareclouddirector.placementPolicy) {
            <km-property>
              <div key>Placement Policy</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.placementPolicy}}</div>
            </km-property>
            }
            @if (machineDeployment.spec.template.cloud.vmwareclouddirector.sizingPolicy) {
            <km-property>
              <div key>Sizing Policy</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.sizingPolicy}}</div>
            </km-property>
            }
            <km-property>
              <div key>IP Allocation Mode</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.ipAllocationMode}}</div>
            </km-property>
            @if (machineDeployment.spec.template.cloud.vmwareclouddirector.vapp) {
            <km-property>
              <div key>VApp</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.vapp}}</div>
            </km-property>
            }
            <km-property>
              <div key>Catalog</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.catalog}}</div>
            </km-property>
            <km-property>
              <div key>Template</div>
              <div value>{{machineDeployment.spec.template.cloud.vmwareclouddirector.template}}</div>
            </km-property>

            }

            <!-- Baremetal Nodes -->
            @if (cluster.spec.cloud?.baremetal?.tinkerbell) {

            <km-property>
              <div key>Hardware Name</div>
              <div value>{{machineDeployment.spec.template.cloud?.baremetal.tinkerbell?.hardwareRef?.Name}}</div>
            </km-property>
            <km-property>
              <div key>Hardware Namespace</div>
              <div value>{{machineDeployment.spec.template.cloud?.baremetal.tinkerbell?.hardwareRef?.Namespace}}</div>
            </km-property>
            <km-property>
              <div key>Operating System Image</div>
              <div value>{{machineDeployment.spec.template.cloud?.baremetal.tinkerbell?.osImageUrl}}</div>
            </km-property>

            }

            <!-- AWS Node Options -->
            @if (cluster.spec.cloud?.aws) {

            @if (machineDeployment.spec.template.cloud?.aws?.isSpotInstance !== undefined) {
            <km-property-boolean label="Spot Instance"
                                 [value]="machineDeployment.spec.template.cloud?.aws?.isSpotInstance" />
            }
            @if (machineDeployment.spec.template.cloud?.aws?.spotInstancePersistentRequest !== undefined) {
            <km-property-boolean label="Spot Instance Persistent Request"
                                 [value]="machineDeployment.spec.template.cloud?.aws?.spotInstancePersistentRequest" />
            }
            @if (machineDeployment.spec.template.cloud?.aws?.assignPublicIP !== undefined) {
            <km-property-boolean label="Assign Public IP"
                                 [value]="machineDeployment.spec.template.cloud?.aws?.assignPublicIP" />
            }
            @if (machineDeployment.spec.template.cloud?.aws?.ebsVolumeEncrypted !== undefined) {
            <km-property-boolean label="EBS Volume Encryption"
                                 [value]="machineDeployment.spec.template.cloud?.aws?.ebsVolumeEncrypted" />
            }

            }

            <!-- Azure Node Options -->
            @if (cluster.spec.cloud?.azure) {

            <km-property-boolean label="Assign Public IP"
                                 [value]="machineDeployment.spec.template.cloud?.azure?.assignPublicIP" />
            <km-property-boolean label="Accelerated Networking"
                                 [value]="machineDeployment.spec.template.cloud?.azure?.enableAcceleratedNetworking" />

            }

            <!-- DigitalOcean Node Options -->
            @if (cluster.spec.cloud?.digitalocean) {

            @if (machineDeployment.spec.template.cloud?.digitalocean?.backups) {
            <km-property-boolean label="etcd Backups"
                                 [value]="machineDeployment.spec.template.cloud?.digitalocean?.backups" />
            }
            @if (machineDeployment.spec.template.cloud?.digitalocean?.monitoring) {
            <km-property-boolean label="Monitoring"
                                 [value]="machineDeployment.spec.template.cloud?.digitalocean?.monitoring" />
            }

            }

            <!-- GCP Node Options -->
            @if (cluster.spec.cloud?.gcp) {

            <km-property-boolean label="Preemptible"
                                 [value]="machineDeployment.spec.template.cloud?.gcp?.preemptible" />

            }

            <!-- Openstack Node Options -->
            @if (cluster.spec.cloud?.openstack) {

            <km-property-boolean label="Allocate Floating IP"
                                 [value]="machineDeployment.spec.template.cloud?.openstack?.useFloatingIP" />
            <km-property-boolean label="Enable Config Drive"
                                 [value]="machineDeployment.spec.template.cloud?.openstack?.configDrive" />

            }

            <!-- AWS Tags -->
            @if (displayTags(machineDeployment.spec.template.cloud?.aws?.tags)) {
            <km-property>
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.aws?.tags" />
              </div>
            </km-property>
            }

            <!-- Azure Tags -->
            @if (displayTags(machineDeployment.spec.template.cloud?.azure?.tags)) {
            <km-property>
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.azure.tags" />
              </div>
            </km-property>
            }

            <!-- DigitalOcean Tags -->
            @if (machineDeployment.spec.template.cloud?.digitalocean?.tags?.length > 0) {
            <km-property>
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.digitalocean?.tags" />
              </div>
            </km-property>
            }

            <!-- GCP Tags -->
            @if (machineDeployment.spec.template.cloud?.gcp?.tags?.length > 0) {
            <km-property>
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.gcp.tags" />
              </div>
            </km-property>
            }

            <!-- Openstack Tags -->
            @if (displayTags(machineDeployment.spec.template.cloud?.openstack?.tags)) {
            <km-property>
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud?.openstack.tags" />
              </div>
            </km-property>
            }



            <!-- Alibaba Labels -->
            @if (displayTags(machineDeployment.spec.template.cloud?.alibaba?.labels)) {
            <km-property>
              <div key>Provider Labels</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud.alibaba.labels" />
              </div>
            </km-property>
            }

            <!-- GCP Labels -->
            @if (displayTags(machineDeployment.spec.template.cloud?.gcp?.labels)) {
            <km-property>
              <div key>Provider Labels</div>
              <div value>
                <km-labels [labels]="machineDeployment.spec.template.cloud.gcp.labels" />
              </div>
            </km-property>
            }

            <!-- VSphere Tags -->
            @if (machineDeployment.spec.template.cloud?.vsphere?.tags?.length>0) {
            <km-property>
              <div key>Provider Tags</div>
              <div value>
                <km-labels [labels]="convertVSphereTagsIntoObject(machineDeployment.spec.template.cloud?.vsphere?.tags)" />
              </div>
            </km-property>
            }
          </div>
          }
        </div>
      </div>
    </div>
    }

    <div class="step">
      <div class="header"
           [ngClass]="getApplicationsCounterClass()">Applications</div>
      <div class="applications-summary"
           [fxLayoutAlign]="flipLayout ? ' center' : ''">
        @if (applications?.length) {
        <km-application-list [applications]="applications"
                             [canEdit]="false"
                             [cluster]="cluster"
                             [view]="ApplicationsListView.Summary" />
        } @else {
        No application selected.
        }

      </div>
    </div>
  </div>
</div>
